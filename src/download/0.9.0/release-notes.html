<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>0.9.0 Release Notes ‚ö° The Zig Programming Language</title>
    <link rel="icon" href="https://ziglang.org/favicon.png">
    <style>
      :root{
         --nav-width: 24em;
         --nav-margin-l: 1em;
      }
      body{
        font-family: system-ui, -apple-system, Roboto, "Segoe UI", sans-serif;
        margin: 0;
        line-height: 1.5;
      }
      header {
        padding: 0 1em;
      }
      h1, h2, h3, h4, h5 {
        margin: 0.5em 0 0.5em;
        line-height: 1.2;
        font-weight: bold;
      }
      h1, h2 { font-size: 2.0em; }
      h3 { font-size: 1.5em; }
      h4 { font-size: 1.25em; }
      h5 { font-size: 1.0em; }
      #contents {
        max-width: 60em;
        margin: auto;
        padding: 0 1em;
      }
      #navigation {
        padding: 0 1em;
      }

      @media screen and (min-width: 1025px) {
        header {
          margin-left: calc(var(--nav-width) + var(--nav-margin-l));
        }
        header h1 {
          margin: auto;
          max-width: 30em;
        }
        #navigation {
          overflow: auto;
          width: var(--nav-width);
          height: 100vh;
          position: fixed;
          top:0;
          left:0;
          bottom:0;
          padding: unset;
          margin-left: var(--nav-margin-l);
        }
        #navigation nav ul {
          padding-left: 1em;
        }
        #contents-wrapper {
          margin-left: calc(var(--nav-width) + var(--nav-margin-l));
        }
    }

    a:hover,a:focus {
      background: #fff2a8;
    }
    dt {
      font-weight: bold;
    }
    th, td {
      padding: 0.6em;
    }
    tr:nth-child(even) {
      background: #f2f3f3;
    }
    .t0_1, .t37, .t37_1 {
      font-weight: bold;
    }
    .t2_0 {
      color: #575757;
    }
    .t31_1 {
      color: #b40000;
    }
    .t32_1 {
      color: green;
    }
    .t36_1 {
      color: #005C7A;
    }
    .file {
      font-weight: bold;
      border: unset;
    }
    code {
      background: #f8f8f8;
      border: 1px dotted silver;
      padding-left: 0.3em;
      padding-right: 0.3em;
    }
    pre > code {
      display: block;
      overflow: auto;
      padding: 0.5em;
      border: 1px solid #eee;
      line-height: normal;
    }
    samp {
      background: #fafafa;
    }
    pre > samp {
      display: block;
      overflow: auto;
      padding: 0.5em;
      border: 1px solid #eee;
      line-height: normal;
    }
    kbd {
      font-weight: bold;
    }
    .table-wrapper {
      width: 100%;
      overflow-x: auto;
    }

    .tok-kw {
        color: #333;
        font-weight: bold;
    }
    .tok-str {
        color: #d14;
    }
    .tok-builtin {
        color: #005C7A;
    }
    .tok-comment {
        color: #545454;
        font-style: italic;
    }
    .tok-fn {
        color: #900;
        font-weight: bold;
    }
    .tok-null {
        color: #005C5C;
    }
    .tok-number {
        color: #005C5C;
    }
    .tok-type {
        color: #458;
        font-weight: bold;
    }

    figure {
      margin: auto 0;
    }
    figure pre {
      margin-top: 0;
    }

    figcaption {
      padding-left: 0.5em;
      font-size: small;
      border-top-left-radius: 5px;
      border-top-right-radius: 5px;
    }
    figcaption.zig-cap {
      background: #fcdba5;
    }
    figcaption.c-cap {
      background: #a8b9cc;
      color: #000;
    }
    figcaption.peg-cap {
      background: #fcdba5;
    }
    figcaption.javascript-cap {
      background: #365d95;
      color: #fff;
    }
    figcaption.shell-cap {
      background: #ccc;
      color: #000;
    }

    aside {
      border-left: 0.25em solid #f7a41d;
      padding: 0 1em 0 1em;
    }

    h1 a, h2 a, h3 a, h4 a, h5 a {
      text-decoration: none;
      color: #333;
    }

    a.hdr {
      visibility: hidden;
    }
    h1:hover > a.hdr, h2:hover > a.hdr, h3:hover > a.hdr, h4:hover > a.hdr, h5:hover > a.hdr {
      visibility: visible;
    }

    pre {
      counter-reset: line;
    }
    pre .line:before {
      counter-increment: line;
      content: counter(line);
      display: inline-block;
      padding-right: 1em;
      width: 2em;
      text-align: right;
      color: #999;
    }
    th pre code {
        background: none;
    }
    th .line:before {
        display: none;
    }

    #logo {
      width: 100%;
      height: 7em;
      display: block;
      background-image: url(https://ziglang.org/img/zig-logo-dark.svg);
      background-repeat: no-repeat;
    }

    @media (prefers-color-scheme: dark) {
      body{
          background:#121212;
          color: #ccc;
      }
      a {
          color: #88f;
      }
      a:hover,a:focus {
          color: #000;
      }
      tr:nth-child(even) {
        background: #1e1e1e;
      }
      .t2_0 {
          color: grey;
      }
      .t31_1 {
          color: red;
      }
      .t32_1 {
          color: #00B800;
      }
      .t36_1 {
          color: #0086b3;
      }
      code {
        background: #222;
        border-color: #444;
      }
      pre > code {
          color: #ccc;
          background: #222;
          border: unset;
      }
      samp {
        background: #000;
        color: #ccc;
      }
      pre > samp {
        border: unset;
      }
      .tok-kw {
          color: #eee;
      }
      .tok-str {
          color: #2e5;
      }
      .tok-builtin {
          color: #ff894c;
      }
      .tok-comment {
          color: #aa7;
      }
      .tok-fn {
          color: #B1A0F8;
      }
      .tok-null {
          color: #ff8080;
      }
      .tok-number {
          color: #ff8080;
      }
      .tok-type {
          color: #68f;
      }
      h1 a, h2 a, h3 a, h4 a, h5 a {
          color: #aaa;
      }
      figcaption.zig-cap {
          background-color: #b27306;
          color: #000;
      }
      figcaption.peg-cap {
          background-color: #b27306;
          color: #000;
      }
      figcaption.shell-cap {
        background: #2a2a2a;
        color: #fff;
      }
      #logo {
        background-image: url(https://ziglang.org/img/zig-logo-light.svg);
      }
    }
  </style>
  </head><!--
++++++++[>++++[>++>+++>+++>+<<<<-]>+>+>->>+[<]<-]>>.>- - -.+++++++..+++.>>.<-.<.+++.- - - - - -.- - - - - - - -.>>+.>++.
  --><body>
    <div id="contents">
    <a href="https://ziglang.org/"><span id="logo"></span></a>
    <h1>0.9.0 Release Notes</h1>
    <p>
    <a href="https://ziglang.org/download/">Download &amp; Documentation</a>
    </p>
    <p>
    Zig is a general-purpose programming language and toolchain for maintaining
    <strong>robust</strong>, <strong>optimal</strong>, and <strong>reusable</strong> software.
    </p>
    <p>
    Backed by the <a href="/zsf/">Zig Software Foundation</a>,
    the project is <strong>financially sustainable</strong> and offers billable
    hours for core team members:
    </p>
    <ul style="columns: 3">
      <li><a href="https://andrewkelley.me/">Andrew Kelley</a></li>
      <li><a href="https://kristoff.it/">Loris Cro</a></li>
      <li><a href="http://www.jakubkonka.com/">Jakub Konka</a></li>
    </ul>
    <p>
    Please consider a <a href="/zsf/">recurring donating to the ZSF</a>
    to help us pay even more contributors!
    </p>
    <p>
    This release features <strong>6 months of work</strong>:
    changes from <strong>177 different contributors</strong>, spread among
    <strong>2012 commits</strong>.</p>
    <p>One sentence summary:
    The {#link|Toolchain#} "just works" in more cases,
    many {#link|bugs were fixed|Bug Fixes#},
    the {#link|Self-Hosted Compiler#} is 44% complete,
    the {#link|Support Table#} is expanded,
    there were a handful of {#link|Language Changes#},
    the project started {#link|Performance Tracking#},
    and the {#link|Standard Library#} remains unstable.
    </p>
    {#header_open|Table of Contents#}
    {#nav#}
    {#header_close#}

    {#header_open|Support Table#}
    {#header_open|Tier System#}
    <p>
    A green check mark (‚úÖ) indicates the target meets all the requirements for the
    support tier. The other icons indicate what is <em>preventing the target from
      reaching the support tier</em>. In other words, the icons are
    <strong>to-do items</strong>. If you find any wrong data here please
    <a href="https://github.com/ziglang/www.ziglang.org">submit a pull request</a>!
    </p>
    {#header_open|Tier 1 Support#}
    <ul>
      <li>Not only can Zig generate machine code for these targets, but the standard
        library cross-platform abstractions have implementations for these targets.</li>
      <li>üß™ The CI server automatically tests these targets on every commit to master
        branch.</li>
      <li>üì¶ The CI server automatically produces pre-built binaries for these targets,
        on every commit to master, and updates
        <a href="https://ziglang.org/download/">the download page</a> with links.</li>
      <li>These targets have debug info capabilities and therefore produce stack traces
        on failed assertions.</li>
      <li>libc is available for this target even when cross compiling.</li>
      <li>üêõ All the behavior tests and applicable standard library tests pass for this target.
          All language features are known to work correctly. Experimental features do not
          count towards disqualifying an operating system or architecture from Tier 1.</li>
      <li><code>zig cc</code>, <code>zig c++</code> and related toolchain commands support
        this target.</li>
      <li>üíÄ If the Operating System is proprietary then the target is not marked deprecated
        by the vendor,
        <a href="https://support.apple.com/en-us/HT208436">such as macos/x86</a>.</li>
    </ul>
    <table>
    <thead>
    <tr>
    <th></th>
    <th>freestanding</th>
    <th>Linux 3.16+</th>
    <th>macOS 10.13+</th>
    <th>Windows 8.1+</th>
    <th>WASI</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>x86_64</td>
    <td>‚úÖ</td>
    <td>‚úÖ</td>
    <td>‚úÖ</td>
    <td>‚úÖ</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>x86</td>
    <td>‚úÖ</td>
    <td><a href="https://github.com/ziglang/zig/issues/1929">#1929</a> üêõüì¶</td>
    <td>üíÄ</td>
    <td><a href="https://github.com/ziglang/zig/issues/537">#537</a> üêõüì¶</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>aarch64</td>
    <td>‚úÖ</td>
    <td><a href="https://github.com/ziglang/zig/issues/2443">#2443</a> üêõ</td>
    <td>‚úÖ</td>
    <td>üêõüì¶üß™</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>arm</td>
    <td>‚úÖ</td>
    <td><a href="https://github.com/ziglang/zig/issues/3174">#3174</a> üêõüì¶</td>
    <td>üíÄ</td>
    <td>üêõüì¶üß™</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>mips</td>
    <td>‚úÖ</td>
    <td><a href="https://github.com/ziglang/zig/issues/3345">#3345</a> üêõüì¶</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>riscv64</td>
    <td>‚úÖ</td>
    <td><a href="https://github.com/ziglang/zig/issues/4456">#4456</a> üêõüì¶</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>sparcv9</td>
    <td>‚úÖ</td>
    <td><a href="https://github.com/ziglang/zig/issues/4931">#4931</a> üêõüì¶üß™</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>wasm32</td>
    <td>‚úÖ</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>‚úÖ</td>
    </tr>
    </tbody>
    </table>
    {#header_close#}

    {#header_open|Tier 2 Support#}
    <ul>
    <li>üìñ The standard library supports this target, but it's possible that some
      APIs will give an "Unsupported OS" compile error. One can link with libc or other
      libraries to fill in the gaps in the standard library.</li>
    <li>üîç These targets are known to work, but may not be automatically tested, so there
      are occasional regressions.</li>
    <li>Some tests may be disabled for these targets as we work toward
      {#link|Tier 1 Support#}.
    </li>
    </ul>
    <table>
    <thead>
    <tr>
    <th></th>
    <th>free standing</th>
    <th>Linux 3.16+</th>
    <th>macOS 10.13+</th>
    <th>Windows 8.1+</th>
    <th>FreeBSD 12.0+</th>
    <th>NetBSD 8.0+</th>
    <th>DragonFlyBSD 5.8+</th>
    <th>UEFI</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>x86_64</td>
    <td>{#link|Tier 1|Tier 1 Support#}</td>
    <td>{#link|Tier 1|Tier 1 Support#}</td>
    <td>{#link|Tier 1|Tier 1 Support#}</td>
    <td>{#link|Tier 1|Tier 1 Support#}</td>
    <td>‚úÖ</td>
    <td>‚úÖ</td>
    <td>‚úÖ</td>
    <td>‚úÖ</td>
    </tr>
    <tr>
    <td>x86</td>
    <td>{#link|Tier 1|Tier 1 Support#}</td>
    <td>‚úÖ</td>
    <td>üíÄ</td>
    <td>‚úÖ</td>
    <td>üîç</td>
    <td>üîç</td>
    <td>N/A</td>
    <td>‚úÖ</td>
    </tr>
    <tr>
    <td>aarch64</td>
    <td>{#link|Tier 1|Tier 1 Support#}</td>
    <td>‚úÖ</td>
    <td>{#link|Tier 1|Tier 1 Support#}</td>
    <td>üîç</td>
    <td>üîç</td>
    <td>üîç</td>
    <td>N/A</td>
    <td>üîç</td>
    </tr>
    <tr>
    <td>arm</td>
    <td>{#link|Tier 1|Tier 1 Support#}</td>
    <td>‚úÖ</td>
    <td>üíÄ</td>
    <td>üîç</td>
    <td>üîç</td>
    <td>üîç</td>
    <td>N/A</td>
    <td>üîç</td>
    </tr>
    <tr>
    <td>mips64</td>
    <td>‚úÖ</td>
    <td>‚úÖ</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>üîç</td>
    <td>üîç</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>mips</td>
    <td>{#link|Tier 1|Tier 1 Support#}</td>
    <td>‚úÖ</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>üîç</td>
    <td>üîç</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>powerpc64</td>
    <td>‚úÖ</td>
    <td>üìñ</td>
    <td>üíÄ</td>
    <td>N/A</td>
    <td>üîç</td>
    <td>üîç</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>powerpc</td>
    <td>‚úÖ</td>
    <td>‚úÖ</td>
    <td>üíÄ</td>
    <td>N/A</td>
    <td>üîç</td>
    <td>üîç</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>riscv64</td>
    <td>{#link|Tier 1|Tier 1 Support#}</td>
    <td>‚úÖ</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>üîç</td>
    <td>üîç</td>
    <td>N/A</td>
    <td>üîç</td>
    </tr>
    <tr>
    <td>sparcv9</td>
    <td>{#link|Tier 1|Tier 1 Support#}</td>
    <td>‚úÖ</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>üîç</td>
    <td>üîç</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    </tbody>
    </table>
    {#header_close#}

    {#header_open|Tier 3 Support#}
    <ul>
    <li>The standard library has little to no knowledge of the existence of this
        target.</li>
    <li>If this target is provided by LLVM, LLVM has the target enabled by default.</li>
    <li>These targets are not frequently tested; one will likely need to contribute
      to Zig in order to build for these targets.</li>
    <li>The Zig compiler might need to be updated with a few things such as<ul>
       <li>what sizes are the C integer types</li>
       <li>C ABI calling convention for this target</li>
       <li>start code and default panic handler</li>
      </ul></li>
     <li><code>zig targets</code> is guaranteed to include this target.</li>
    </ul>
    <table>
      <thead>
        <tr>
          <th></th>
          <th>freestanding</th>
          <th>Linux 3.16+</th>
          <th>Windows 8.1+</th>
          <th>FreeBSD 12.0+</th>
          <th>NetBSD 8.0+</th>
          <th>UEFI</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>x86_64</td>
          <td>{#link|Tier 1|Tier 1 Support#}</td>
          <td>{#link|Tier 1|Tier 1 Support#}</td>
          <td>{#link|Tier 1|Tier 1 Support#}</td>
          <td>{#link|Tier 2|Tier 2 Support#}</td>
          <td>{#link|Tier 2|Tier 2 Support#}</td>
          <td>{#link|Tier 2|Tier 2 Support#}</td>
        </tr>
        <tr>
          <td>x86</td>
          <td>{#link|Tier 1|Tier 1 Support#}</td>
          <td>{#link|Tier 2|Tier 2 Support#}</td>
          <td>{#link|Tier 2|Tier 2 Support#}</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>{#link|Tier 2|Tier 2 Support#}</td>
        </tr>
        <tr>
          <td>aarch64</td>
          <td>{#link|Tier 1|Tier 1 Support#}</td>
          <td>{#link|Tier 2|Tier 2 Support#}</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
        </tr>
        <tr>
          <td>arm</td>
          <td>{#link|Tier 1|Tier 1 Support#}</td>
          <td>{#link|Tier 2|Tier 2 Support#}</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
        </tr>
        <tr>
          <td>mips64</td>
          <td>{#link|Tier 2|Tier 2 Support#}</td>
          <td>{#link|Tier 2|Tier 2 Support#}</td>
          <td>N/A</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>mips</td>
          <td>{#link|Tier 1|Tier 1 Support#}</td>
          <td>{#link|Tier 2|Tier 2 Support#}</td>
          <td>N/A</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>riscv64</td>
          <td>{#link|Tier 1|Tier 1 Support#}</td>
          <td>{#link|Tier 2|Tier 2 Support#}</td>
          <td>N/A</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
        </tr>
        <tr>
          <td>powerpc32</td>
          <td>{#link|Tier 2|Tier 2 Support#}</td>
          <td>{#link|Tier 2|Tier 2 Support#}</td>
          <td>N/A</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>powerpc64</td>
          <td>{#link|Tier 2|Tier 2 Support#}</td>
          <td>‚úÖ</td>
          <td>N/A</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>bpf</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>hexagon</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>amdgcn</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>sparc</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>s390x</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>lanai</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>csky</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
          <td>‚úÖ</td>
          <td>‚úÖ</td>
          <td>N/A</td>
        </tr>
      </tbody>
    </table>
    <table>
      <thead>
        <tr>
          <th></th>
          <th>freestanding</th>
          <th>emscripten</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>wasm32</td>
          <td>{#link|Tier 1|Tier 1 Support#}</td>
          <td>‚úÖ</td>
        </tr>
      </tbody>
    </table>
    {#header_close#}

    {#header_open|Tier 4 Support#}
    <ul>
      <li>Support for these targets is entirely experimental.</li>
      <li>If this target is provided by LLVM, LLVM may have the target as an
        experimental target, which means that you need to use Zig-provided binaries
        for the target to be available, or build LLVM from source with special configure flags.
        <code>zig targets</code> will display the target if it is available.</li>
      <li>This target may be considered deprecated by an official party,
        <a href="https://support.apple.com/en-us/HT208436">such as macosx/i386</a> in which
        case this target will remain forever stuck in Tier 4.</li>
      <li>This target may only support <code>-femit-asm</code> and cannot emit object files
        (<code>-fno-emit-bin</code> enabled by default and cannot be overridden).</li>
    </ul>
    <p>Tier 4 targets:</p>
    <ul style="columns: 3">
      <li>avr</li>
      <li>riscv32</li>
      <li>xcore</li>
      <li>nvptx</li>
      <li>msp430</li>
      <li>r600</li>
      <li>arc</li>
      <li>tce</li>
      <li>le</li>
      <li>amdil</li>
      <li>hsail</li>
      <li>spir</li>
      <li>kalimba</li>
      <li>shave</li>
      <li>renderscript</li>
      <li>32-bit x86 macOS, 32-bit ARM macOS, powerpc32 and powerpc64 macOS,
        because Apple has officially dropped support for them.</li>
    </ul>
    {#header_close#}
    {#header_close#}

    {#header_open|WebAssembly#}
    <ul>
      <li>wasi libc: fix wasm-ld failure in matching libc symbols, and enable tests (#9227).</li>
      <li>link: don't link system libraries by the wasm-ld linker. The only allowed system libraries
      that we can link are libraries that are part of the sysroot such as libc or WASI emulated
      subcomponents. This is required as Wasm allows to defer symbol resolution until load time. For example,
      specifying that an import is coming from <code>wasi_snapshot_preview1</code> should not generate a link flag
      <code>-lwasi_snapshot_preview1</code> on the linker line as this is not a system library that needs to be
      imported at link-time, but a system library that is provided by the runtime at load-time.</li>
    </ul>
    TODO:     Merge pull request #8992 from ziglang/cc-wasm32-wasi-emulations
    Merge branch 'mathetake-cc-wasi-execmodel'
    Merge branch 'mathetake-cpp-wasi'

commit bc7761d8e0bb70adb3c76c588f9f0b62937c6571
Author: Takeshi Yoneda <takeshi@tetrate.io>
Date:   Thu Jul 1 09:02:48 2021 +0900

    Add support for WASI reactor in pure Zig-exe. (#9178)
    
    * Add command line help for "-mexec-model"
    * Define WasmExecModel enum in std.builtin.
    * Drop the support for the old crt1.o in favor of crt1-command.o

commit 5c34c01179a4a54c0fb11d107664f8c35e9f09dc
Author: Takeshi Yoneda <takeshi@tetrate.io>
Date:   Sat Jul 3 12:42:42 2021 +0900

    WASI: include exec-model in cache state.

commit b9e896d7b076e59d6f6dd9b0bad9697875d1f6e4
Author: Takeshi Yoneda <takeshi@tetrate.io>
Date:   Tue Jul 6 20:49:57 2021 +0900

    wasi-libc: remove crt1.o as it's not WASI ABI compatible

commit 5c79370e9c3edee271d4f0e65e718d12b8db8a1e
Author: Takeshi Yoneda <takeshi@tetrate.io>
Date:   Tue Aug 24 21:03:50 2021 +0900

    wasm: pass --export-dynamic to wasm-ld for WASI reactors. (#9605)

commit d2cdfb949033cfd463cdd4ef1bbf93f94d4d190a
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Tue Nov 9 14:29:20 2021 -0700

    stage2: add 4 new linker flags for WebAssembly
    
    --import-memory          import memory from the environment
    --initial-memory=[bytes] initial size of the linear memory
    --max-memory=[bytes]     maximum size of the linear memory
    --global-base=[addr]     where to start to place global data
    
    See #8633

commit b0ee911c2389e507d36a2f9c2442046133c18b93
Author: Jakub Konka <kubkon@jakubkonka.com>
Date:   Mon Jun 7 18:00:36 2021 +0200

    wasi: always grant fd_readdir right
    
    Since v0.23 release of Wasmtime, if we want to iterate a directory
    Y then directory Y needed to have been granted `fd_readdir` right.
    However, it is now also required for directory X to carry `fd_readdir`
    right, and so on, up-chain all the way until we reach the preopen
    (which possesses all rights by default).
    
    This caused problems for us since our libstd implementation is more
    fine-grained and allowed for parent dirs not to carry the right while
    allow for iterating on its children. My proposal here is to always
    grant `fd_readdir` right as part of
    `std.fs.Dir.OpenDirOptions.access_sub_paths`. This seems to be the
    approach taken by Rust also, plus we should be justified to take this
    approach since WASI is experimental and snapshot1 will be discontinued
    eventually and replaced with a new approach to access management
    that will require a complete rewrite of our libstd anyhow.

commit e8e305b67ce4993a3789e0e3e8baa6064de45114
Author: Jakub Konka <kubkon@jakubkonka.com>
Date:   Wed Jun 9 23:11:34 2021 +0200

    Re-enable multiple wasm32 vector tests
    
    Fixes #5339

commit acf2e8fe6484a48cef76c20368ff06fe9d7b264e
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Wed Jun 30 18:39:04 2021 -0700

    fix start code for WebAssembly



    <p>Contributors: Luuk de Gram, Takeshi Yoneda, Jakub Konka, Andrew Kelley</p>
    {#header_close#}

    {#header_open|32-bit x86#}
    <p>Zig now has {#link|Continuous Integration#} testing enabled for {#link|Linux#} builds
    against {#link|glibc|glibc 2.34#}.</p>
    {#header_close#}

    {#header_open|RISC-V#}
    <ul>
      <li>Fix RISC-V assembly CPU features.
        Previously, Zig did not properly communicate the target CPU features for
        RISC-V to clang assembler, because Clang has a different way to pass CPU
        features for C code and for assembly code. This commit makes Zig pass a
        RISC-V <code>-march</code> flag in order to communicate CPU features to
        Clang when compiling assembly files.</li>
    </ul>
    TODO
commit 3311ef3262c6d650d7ef23ad62ae0483835f79c4
Merge: 84704ef43 4c1a62326
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Fri Dec 3 16:37:56 2021 -0800

    Merge pull request #10006 from akovaski/riscv-default-abi
    
    Default target-abi based on RISC-V extensions and user selectable -mabi/target-abi

    <p>Contributors: Andrew Kelley, Michael Dusan</p>
    {#header_close#}

    {#header_open|NetBSD#}
commit 79a4da14ad137aa52a32f9113982b706d8c5fe8b
Author: Michael Dusan <michael.dusan@gmail.com>
Date:   Wed Jun 16 00:35:20 2021 -0400

    netbsd: add args to limit number of PT_LOAD segs
    
    NetBSD expects 2 PT_LOAD segments in a shared object, otherwise
    ld.elf_so fails to load, emitting a general "not found" error.
    
    Workaround issue by adding args `--no-rosegment` and `-znorelro`.
    
    see #9109

commit bfe3558efe9faf20d68b947c9dc077963b1f87ad
Author: Michael Dusan <michael.dusan@gmail.com>
Date:   Wed Jun 16 02:38:43 2021 -0400

    netbsd: add more std.os.bits

    {#header_close#}

    {#header_open|Windows#}
    <ul>
      <li>Zig now looks for more DLL import lib path names.
        When linking with -lfoo syntax, this indicates to Zig that the
        dependency should either be provided by Zig, or it should be dynamically
        provided by the system.
        For windows-gnu targets, the search path was "foo.lib". Now it
        additionally looks for "libfoo.dll.a" (#7799).</li>
      <li>Removed the <code>TCHAR</code> idiom entirely.</li>
      <li>std.Progress: use <code>*W</code> functions instead of <code>*A</code> functions (#534).
        This eliminates the last and final call to any A functions so now we are properly using only W
        functions in the {#link|Standard Library#}.</li>
      <li>Added definitions for winmm.dll (#8801).</li>
      <li>Fixed <code>OVERLAPPED</code>, add <code>OVERLAPPED_ENTRY</code>.</li>
      <li>Support emitting DWARF on Windows (#8717).</li>
      <li>Improved error for unsupported async sockets.</li>
      <li>Fixed deadlock in <code>ChildProcess</code> (#9148).</li>
      <li>Fixed compile error: "'bMenu' needs to casted" (#9426).</li>
      <li>Removed WIN16 version of <code>WSAOVERLAPPED</code>. Use <code>LPWSAOVERLAPPED_COMPLETION_ROUTINE</code>.</li>
      <li>Fixed {#link|Standard Library#} path resolution.
        <code>GetCurrentDirectory</code> returns a path with a trailing slash if and only if
        the cwd is a root directory, making the code in <code>resolveWindows</code> return an
        invalid path with two consecutive slashes (#10093).</li>
    </ul>
    <p>TODO</p>
commit ed2e4a7f138322dcf5c76138586971e228c0c3c9
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Tue Nov 16 12:50:57 2021 -0700

    disable LTO by default on Windows when linking libc++
    
    See #8531

    <p>Contributors: Andrew Kelley, viri, mchudleigh, Jonathan Marler, Travis Martin, LemonBoy</p>

    {#header_open|ARM64 Windows#}
commit 6237dc0ab8fcb6fc14b97b2ea5494a488e94e492
Merge: 501e6cf2f 343547d4a
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Wed Sep 8 13:32:20 2021 -0400

    Merge pull request #9700 from marler8997/bootstrapAarch64Windows
    
    changes to build zig-bootstrap aarch64-windows

 src/mingw.zig       |  1 +
 src/windows_sdk.cpp | 20 ++++++++++++++++----
 2 files changed, 17 insertions(+), 4 deletions(-)

commit fd2c1d860503ec6cd71ab9a692ad2dbf6bd3c269
Author: Jonathan Marler <johnnymarler@gmail.com>
Date:   Tue Sep 7 10:44:21 2021 -0600

    Fix building aarch64-windows-gnu by adding missing libc files and compiler_rt functions (#9555)
    
    * fix issue 9519
    
    Added some missing files from mingw
    
    * add missing compiler_rt functions
    * add aarch64-windows-gnu to test targets
    * add more compiler_rt
    * add log2
    * add pow
    * add modti3

    {#header_close#}
    {#header_close#}

    {#header_open|UEFI#}
    <ul>
      <li>boot_services: allow custom MemoryTypes.</li>
      <li>Fixed packed struct bitfields.</li>
      <li>FileProtocol: add Reader, Writer, SeekableStream.</li>
      <li>MemoryDescriptor: fixed padding after memory type.</li>
      <li>Added virtual addressing helpers (#10195).</li>
    </ul>
    <p>Contributors: Stephen von Takach, Nameless, Sreehari Sreedev</p>
    {#header_close#}

    {#header_open|iOS#}
    <p>Thanks to major improvements in the {#link|Self-Hosted Linker#} combined with
    support for compiling {#link|Objective-C|Objective-C and Objective-C++#}, along
    with miscellaneous improvements in the {#link|Self-Hosted Compiler#},
    Zig now targets iOS and iPhone Simulator platforms. See
    <a href="https://github.com/kubkon/zig-ios-example">kubkon/zig-ios-example</a>
    for a complete example.</p>
    <p>(#9532)</p>
    {#header_close#}

    {#header_open|Solaris/Illumos#}
commit 87fd502fb68f8f488e6eba6b1f7d70902d6bfe5a
Author: Stephen Gregoratto <dev@sgregoratto.me>
Date:   Tue Aug 31 22:21:23 2021 +1000

    Initial bringup of the Solaris/Illumos port
    {#header_close#}

    {#header_open|Haiku#}
commit 36c8adf58922d8e357bbaf7ce914cfd4b7b56354
Merge: e266ede6e be541ca5e
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Wed Nov 24 18:42:30 2021 -0800

    Merge pull request #10073 from hoanga/haiku-support-build2
    
    more haiku support


    {#header_close#}

    {#header_open|macOS#}
    <p>
    Generally, Zig 0.9.0 works <em>much better</em> than 0.8.x on macOS, due to
    major improvements in the {#link|Self-Hosted Linker#}, {#link|Versioned C Headers#},
    and miscellaneous improvements, such as:
    </p>
    <ul>
      <li>Improved SDK detection and linker integration with
        <code>_mh_execute_header</code> (#10217).</li>
      <li>Fixed stack traces in aarch64-macos and when linking with ld64 (#10225).</li>
      <li>Fixed ulock usage (#9545).</li>
    </ul>

    {#header_open|Versioned C Headers#}
    TODO (#10215)
    {#header_close#}
    {#header_close#}

    {#header_open|Linux#}
    <ul>
      <li>Updated libc Linux headers to v5.16-rc3 (#9837). Additionally,
      the headers have been compacted to reduce installation size by sharing
      x86 and x86_64 headers in the same directory. There is a
      <a href="https://github.com/ziglang/zig/blob/0.9.0/tools/update-linux-headers.zig">new tool</a>
      for Zig maintainers to use to upgrade libc Linux headers in the future.</li>
      <li>Fixed some BPF fn definitions. Cross-checked with bpf.h of kernel 5.12.9.</li>
      <li>Added Linux XDP bits (#9019).</li>
      <li>Added <code>fadvise</code> support.</li>
      <li>Added <code>waitid</code> syscall (#9335).</li>
      <li>Added <code>mknod</code> and <code>mknodat</code> syscalls.</li>
      <li>Added <code>inotify_rm_watch</code> definition and made
        <code>inotify_add_watch</code>'s pathname marked as null-terminated.</li>
      <li>Fixed definition of RW flags (#9428).</li>
      <li>Added missing <code>FUTEX</code> definitions.</li>
      <li>Added recent <code>clone</code>/<code>clone3</code> and missing <code>signalfd</code> flags.</li>
      <li>Fixed <code>rlimit_resource</code> for MIPS and {#link|SPARC#} (#9227).</li>
      <li>Added Linux ioctl creation utilities (#9748).</li>
      <li>Updated syscall numbers for 5.14.</li>
      <li>Fixed edge case in TLS tp calculation.</li>
      <li>Added missing termios definitions (#9707).</li>
      <li>Added perf syscall bits (#10088).</li>
      <li>Fixed invalid errno definition for Android.</li>
      <li><code>EBADLIB</code> in <code>execve</code> now maps to <code>error.InvalidExe</code>
        rather than <code>error.Unexpected</code>.</li>
    </ul>
    <p>Contributors: Andrew Kelley, LemonBoy, Jens Goldberg, Vincent Rischmann, Aydin Mercan,
    Kenta Iwasaki, Hiroaki Nakamura, Felix "xq" Quei√üner
    </p>

    {#header_open|io_uring#}
    <ul>
      <li>Addd sqe prep methods for <code>epoll_ctl</code>, <code>poll_add</code>, and <code>poll_remove</code>.</li>
      <li>Exposed <code>register_eventfd</code>, <code>register_eventfd_async</code>, <code>unregister_eventfd</code> (#9449).</li>
      <li>Implement read_fixed/write_fixed.</li>
      <li>Implement statx.</li>
      <li>Added <code>poll_update</code>. Additionally added a method from liburing to queue
        (but not submit) a SQE to update the user data of an existing poll operation.</li>
      <li>Added <code>cancel</code> and <code>io_uring_prep_cancel</code> (#10081).</li>
      <li>Implemented <code>register_files_update</code>.</li>
      <li>Added <code>link_timeout</code> (#10151).</li>
      <li>Added more opcodes (#10322).</li>
    </ul>
    {#header_close#}
    {#header_close#}

    {#header_open|OpenBSD#}
    <ul>
      <li>Fix dynamic linker path (#9010).</li>
      <li>Event loop: use <code>EVFILT_TIMER</code> instead of <code>EVFILT_USER</code>.
      OpenBSD doesn't implement EVFILT_USER filter for kqueue(2), so we couldn't use that for
      event loop. Instead, use a EVFILT_TIMER filter with EV_ONESHOT (trigger only once) and
      delay 0sec (which trigger immediatly). It fits the usage of EVFILT_USER which is only
      used to "wakeup" the kevent(2) call from userland.</li>
      <li>Added termios constants to <code>std.c.openbsd</code> (#10178).</li>
    </ul>
    <p>Contributors: S√©bastien Marie, Dante Catalfamo</p>
    {#header_close#}

    {#header_open|SPARC#}
    <ul>
      <li>SPARCv9: use C calling convention for <code>restore_rt</code>. Prevents
        infinite loop when calling <code>rt_sigreturn</code>.</li>
      <li>Add missing C type definitions.</li>
      <li>Miscellaneous improvements resulting in more behavior tests passing (#9853).</li>
    </ul>
    <p>Contributors: Koakuma</p>
    {#header_close#}

    {#header_open|Plan 9#}
    TODO g-w1 writes:
<p>A new linker backend for the <a href="https://9p.io/plan9/">Plan9</a> <a href="https://9p.io/magic/man2html/6/a.out">a.out executable format</a> has been written for the Self-Hosted Compiler by Jacob G-W. The linker only works with the x86_64 and aarch64 backends from the Self-Hosted Compiler because llvm cannot emit Plan9 object files. Experimental source location debug info is emitted from this linker.</p>
<p>It can be used with <code>-target x86_64-plan9-none</code>.</p>
<p>Hopefully Zig can soon join Go as the second modern language that is a first class citizen on Plan9!</p>

commit 7b8a968f14a8405c209f35d8a0f904d6f722e713
Merge: b4b90af4e 476faef97
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Thu Jul 8 17:30:28 2021 -0400

    Merge pull request #9105 from g-w1/plan9
    
    stage2: bringup plan9 target and linker

commit 968d1ecf17c0a0774d43965332d00d4ad39743b9
Author: Jacob G-W <jacoblevgw@gmail.com>
Date:   Sat Jul 10 20:56:30 2021 -0400

    stage2 plan9: add aarch64 support

commit 88e0f81eefc84feaba3ea3b146c92a62efeb9c3f
Author: Jacob G-W <jacoblevgw@gmail.com>
Date:   Thu Sep 2 15:51:49 2021 -0400

    plan9: change output executable name
    
    Now object files have the `name.[target char]`
    Executables are just `name`
    Libs are `name.a`

    {#header_close#}

    {#header_open|Custom Operating Systems#}
    <p>People have started to use Zig to
    <a href="https://boksos.com/">build</a>
    <a href="https://github.com/FlorenceOS/Florence">their</a>
    <a href="https://github.com/ZystemOS/pluto/">own</a></a>
    operating systems due to the standard library being available and unopinionated.</p>
    <p>Some improvements to this use case in 0.9.0:</p>
    <ul>
      <li>Made {#link|Linux#} syscalls accessible even when targeting non-Linux.</li>
      <li>Ability to override <code>MAX_PATH_BYTES</code> for custom operating systems.</li>
      <li>Moved {#link|Standard Library#} iovec and log levels to a common area, allowing
          only the OSes that uses them to import them, and removing dependencies on
          bits.zig for the <code>os/<os>/<arch>.zig</code> files.</li>
      <li>Fixed issue where <code>root.os.panic</code> could return.</li>
    </ul>
    <p>Contributors: N00byEdge, mason1920, rgreenblatt</p>
    {#header_close#}
    {#header_close#}

    {#header_open|Documentation#}
    <ul>
      <li>New section: <a href="https://ziglang.org/documentation/0.9.0/#C-Translation-CLI">C Translation CLI</a></li>
      <li>New section: <a href="https://ziglang.org/documentation/0.9.0/#C-Translation-Caching">C Translation Caching</a></li>
      <li>New section: <a href="https://ziglang.org/documentation/0.9.0/#Translation-failures">Translation Failures</a></li>
      <li>New section: <a href="https://ziglang.org/documentation/0.9.0/#C-Macros">C Macros</a></li>
      <li>Miscellaneous minor improvements and corrections.</li>
    </ul>
    <p>Contributors: Andrew Kelley, pfg, Mr. Paul, Daniele Cocca, Lee Cannon, Travis Staloch, Jacob G-W, Robin Voetter, Auguste Rame, Meghan, Michael Byrne, David May, Dmitry Matveyev, Evan Haas, Exonorid, Isaac Freund, Jarred Sumner, Jonathan Marler, Josh Soref, Nathan Michaels, Norberto Mart√≠nez, Nulo, Paul, Philipp L√ºhmann, Roman Fro≈Çow, Rory O‚ÄôKane, Veikka Tuominen, bnprks, kprotty, travisstaloch, yetanothercheer</p>
    {#header_close#}

    {#header_open|Language Changes#}
    <ul>
      <li>{#syntax#}@byteOffsetOf{#endsyntax#} is renamed to {#syntax#}@offsetOf{#endsyntax#}. {#link|zig fmt#}
        automatically performs this upgrade for you.</li>
    </ul>

    {#header_open|More Builtins Return String Literals#}
    <p>
    {#syntax#}@tagName{#endsyntax#}, {#syntax#}@errorName{#endsyntax#},
    {#syntax#}@typeName{#endsyntax#}, and {#syntax#}@embedFile{#endsyntax#} now
    have a return type of {#syntax#}*[N]const u8{#endsyntax#} instead of
    {#syntax#}[]const u8{#endsyntax#}. This means that these builtins can be used anywhere
    a string literal would be used. In other words, they can be
    <a href="https://ziglang.org/documentation/0.9.0/#Type-Coercion">coerced</a> into
    any of these types:
    </p>
    <ul>
      <li>{#syntax#}[]const u8{#endsyntax#} (slice which has pointer and length)</li>
      <li>{#syntax#}[*:0]const u8{#endsyntax#} (null-terminated pointer)</li>
      <li>{#syntax#}[:0]const u8{#endsyntax#} (slice which has pointer and length and is also
      guaranteed by the type system to have a null byte at the end, which is not counted in the length)</li>
    </ul>
    <p>Similarly, the <code>file</code> and <code>fn_name</code> fields of
    <code>std.builtin.SourceLocation</code> returned by {#syntax#}@src{#endsyntax#} now
    are {#syntax#}[:0]const u8{#endsyntax#}, making it possible to pass them as null-terminated
    strings without copying them.</p>
    {#header_close#}

    {#header_open|@minimum and @maximum#}
    TODO
commit cdeea3b0943b070d49d8d8d0855f9a38843e3ecc
Author: Robin Voetter <robin@voetter.nl>
Date:   Sun Jul 25 05:34:11 2021 +0200

    minimum/maximum builtins

    {#header_close#}

    {#header_open|@select#}
    TODO
commit 50a29f7c213d4a906839dfd625b6280663348781
Author: Robin Voetter <robin@voetter.nl>
Date:   Mon Jul 26 02:37:11 2021 +0200

    Add @select
    
    @select(
        comptime T: type,
        pred: std.meta.Vector(len, bool),
        a: std.meta.Vector(len, T),
        b: std.meta.Vector(len, T)
    ) std.meta.Vector(len, T)
    
    Constructs a vector from a & b, based on the values in the predicate vector. For indices where the predicate value is true, the corresponding
    element from the a vector is selected, and otherwise from b.
    {#header_close#}

    {#header_open|SIMD Status#}
    <p>
    In this release, the following builtins have been improved to support SIMD vectors:
    </p>
    <ul>
      <li>{#syntax#}@popCount{#endsyntax#}</li>
      <li>{#syntax#}@ctz{#endsyntax#}</li>
      <li>{#syntax#}@clz{#endsyntax#}</li>
    </ul>
    TODO SIMD status
     - mostly works great
     - link to proposal for vector syntax
     - docs aren't there yet
     - still some missing functionality
     - self-hosted compiler is where it's at
    {#header_close#}

    {#header_open|@intToEnum Implicitly Performs @intCast#}
    <p>This is a backwards-compatible language change.</p>
    <p>
    Previously, {#syntax#}@intToEnum{#endsyntax#} coerced its integer operand to the integer tag
    type of the destination enum type, often requiring the callsite to
    additionally wrap the operand in an {#syntax#}@intCast{#endsyntax#}.
    Now, the {#syntax#}@intCast{#endsyntax#} is
    implicit, and any integer operand can be passed to {#syntax#}@intToEnum{#endsyntax#}.
    </p>
    <p>
    The same as before, it is illegal behavior to pass any integer which does
    not have a corresponding enum tag.
    </p>
    TODO change this boring description into a code example
    {#header_close#}

    {#header_open|Shadowing Declarations#}
    TODO
commit 9c95f38a7c1defc7f63a4815bfc2d76a5f9f83f6
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Tue Aug 24 18:56:16 2021 -0700

    stage1: remove incorrect compile error for var redeclaration
    
    Locals are not allowed to shadow declarations, but declarations are
    allowed to shadow each other, as long as there are no ambiguous
    references.
    
    closes #678

 src/stage1/analyze.cpp | 43 ++++---------------------------------------
 src/stage1/astgen.cpp  | 43 +++++++++++++++++++++++++------------------
 2 files changed, 29 insertions(+), 57 deletions(-)



commit f30aa25cbf9c9a415963b4ea69d7efa09237a704
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Fri Aug 27 21:34:13 2021 -0700

    declarations may collide with primitives with @"" syntax
    
     * stage2 AstGen: add missing compile error for declaring a local
       that shadows a primitive. Even with `@""` syntax, it may not have
       the same name as a primitive.
     * stage2 AstGen: add a compile error for a global declaration
       whose name matches a primitive. However it is allowed when using
       `@""` syntax.
     * stage1: delete all "declaration shadows primitive" compile errors
       because they are now handled by stage2 AstGen.
     * stage1/stage2 AstGen: notice when using `@""` syntax and:
       - treat `_` as a regular identifier
       - skip checking if an identifire is a primitive
    
    Check the new test cases for clarifications on semantics.
    
    closes #6062

commit 6a6e2cd64f3ebb1919dd0ac53d8a1f29c56e6ec2
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Sat Aug 28 10:17:47 2021 -0700

    AstGen: allow locals with same name as primitives with `@""` syntax
    
    This makes local names follow the same rule as declaration names.

    {#header_close#}

    {#header_open|usingnamespace No Longer Affects Identifier Lookup#}
    <p>
    TODO
    </p>
    {#header_close#}

    {#header_open|Saturating Arithmetic#}
    TODO (#9949) (#9679) (#9619)
    {#header_close#}

    {#header_open|Compile Errors for Unused Locals#}
    TODO
    TODO also mention the end-game for this which is a button in an editor
    which does "organize imports"-like behavior. philosohpy of having the source code
    on disk contain the smell.
    {#header_close#}

    {#header_open|@export with Field Access#}
    AstGen: support `@export` with field access
    
    The Zig language specification will support identifiers and field access
    in order to refer to which declaration to export with `@export`.
    
    This commit implements the change in AstGen and updates the language
    reference.
    {#header_close#}

    {#header_open|Keywords Deleted: true, false, undefined, null#}
    <p>
    Now these are primitives provided by the language, same as {#syntax#}void{#endsyntax#},
    {#syntax#}u32{#endsyntax#}, etc.
    </p>
    <p>Consequently one can now use these tokens as, for example, struct field names:</p>
    <pre>{#syntax#}const Foo = struct {
    true: i32,
    false: i32,
    undefined: i32,
    null: i32,
};{#endsyntax#}</pre>
    <p>
    However it is still required to use {#syntax#}@""{#endsyntax#} syntax to disambiguate
    between references to primitives or same-named identifiers. Example:
    </p>
    {#code_begin|test_err|shadows#}
test "example" {
    var i32: bool = true;
}
    {#code_end#}
    {#header_close#}

    {#header_open|Inline Assembly Requires String Literals#}
    TODO
commit dd62a6d2e8de522187fd096354e7156cca1821c5
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Tue Nov 30 19:41:14 2021 -0700

    AstGen: allow non-string-literal inline assembly for stage1
    
    The end-game for inline assembly is that the syntax is more integrated
    with zig, and it will not allow string concatenation for the assembler
    code, for the same reasons that Zig does not have a preprocessor.
    
    However, inline assembly in zig right now is lacking for a variety of
    use cases (take a look at the open issues having to do with inline
    assembly for example), and being able to use comptime expressions to
    concatenate text is a workaround that real-world users are exploiting to
    get by in the short term.
    
    This commit keeps "assembly code must use string literal syntax" as a
    compile error when using stage2, but allows it through when using
    stage1.
    
    I expect to revert this commit after making enough improvements to
    inline assembly that our real world users' needs are satisfied.
    {#header_close#}

    {#header_open|@prefetch#}
commit 97c0373fa7ee125d2d4e73f9b1dc8ea0e2c2e86a
Merge: 75f3e7a4a 516945d7d
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Fri Dec 10 18:54:56 2021 -0800

    Merge pull request #10295 from ifreund/prefetch
    
    Implement @prefetch()
    {#header_close#}
    {#header_close#}

    {#header_open|Bootstrap Compiler#}
    <p>In the previous release, as well as this release, the main Zig compiler everybody uses
    is the bootstrap compiler, written in C++, also known as "stage1". Despite the main focus
    of this release cycle being the {#link|Self-Hosted Compiler#}, there were some improvements
    to stage1 as well.</p>
    <ul>
      <li>Fix SIMD instructions not respecting target CPU features when LTO is enabled (#8965).</li>
      <li>Store the specified code model in the LLVM module, ensuring that LTO builds pick
        up the correct model (#9132).</li>
      <li>Fix initialization of tuples with array literals (now it works).</li>
      <li>Fix render_const_value for printing const optional pointers.</li>
      <li>Make {#syntax#}@truncate{#endsyntax#} to an integer type of different sign an error
        at comptime too.</li>
      <li>CLI: remove <code>--verbose-ast</code> and <code>--verbose-tokenize</code> (#9034).</li>
      <li>Fix handling of C ABI parameters split in multiple regs by taking into account
        the increased number of parameters when flattening a structure into one or more
        SSE registers (#9061).</li>
      <li>Fix zig0 help message (#9140).</li>
      <li>Fix {#syntax#}@shuffle{#endsyntax#} type and mask parameters to imply a
        {#syntax#}comptime{#endsyntax#} scope for the expression.</li>
      <li>Fix unexpected truncation behavior with comptime_int larger than u64
          range (#9303) (#9299).</li>
      <li>Compilation speed is enhanced by 19% by improving hash functions.</li>
      <li>Compilation RAM usage is reduced by 5% by avoiding wasting padding with IR instruction
          tags and by removing an unneeded field.</li>
      <li>Fix bigint_shl (#9305).</li>
      <li>Add {#syntax#}c_longdouble{#endsyntax#} mapping for the s390x architecture.</li>
      <li>Expand SysV C ABI compatibility for small structs.</li>
      <li>Fix anonymous struct naming in some cases (#4330) (#9339).</li>
      <li>Add mask before truncating dereferenced bit pointers (#9584). Resulted in an
        <a href="https://bugs.llvm.org/show_bug.cgi?id=51529">LLVM bug fix</a>.</li>
      <li>Work around LLVM's buggy fma lowering by lowering {#syntax#}@mulAdd{#endsyntax#}
          directly to a call to <code>fmaq</code> instead of to the LLVM intristic
          because LLVM will lower it to <code>fmal</code> even when the target's
          <code>long double</code> is not equivalent to {#syntax#}f128{#endsyntax#}.</li>
      <li>Fix <code>zig test --verbose-air</code> crashing on an empty file (#10031).</li>
      <li>Fix path normalization on Windows by backporting a missing change from the
        {#link|Self-Hosted Compiler#} (#9465).</li>
      <li>Fix type mapping for integers and {#syntax#}c_longdouble{#endsyntax#} for the
        nvptx architecture.</li>
      <li>Fix linking errors with floorl on MSVC by including math.h in a .cpp file.
        floorl is a force inline function defined in a header thus not visible for the linker.</li>
      <li>Fix caching of LLVM builtin fns. The cache entry must take into account the fact some
        functions operate on scalar types and some other on vectors of scalar types (#10147).</li>
      <li>Improve packed struct array padding error message.</li>
      <li>Fix exporting enums (#9498).</li>
      <li>Make cmpxchg respect <code>-fsingle-threaded</code>.</li>
      <li>Add support for the <code>NO_COLOR</code> environment variable.</li>
      <li>Disable valgrind integration on macOS. Unfortunately, Valgrind for macOS
        has been broken for years, and the Homebrew formula is only for Linux (#9612).</li>
      <li>Fix {#syntax#}@divTrunc{#endsyntax#} behavior dependent on the order of operands (#10001).</li>
      <li>Make omiting frame pointer independent of build mode (#9874).</li>
    </ul>
    <p>Contributors: Andrew Kelley, LemonBoy, Martin Wickham, Robin Voetter, Daniele Cocca, Takeshi Yoneda, Auguste Rame, Daniele Cocca, Jacob G-W, Lee Cannon, LemonBoy, Matthew Borkowski, Travis Staloch, leesongun, travisstaloch, Belhorma Bendebiche, Evan Haas, Exonorid, Frank Denis, Jakub Konka, Jay Petacat, Josh Soref, Kirk Scheibelhut, Meghan Denny, Michael Dusan, Richard Eklycke, Stephen Gregoratto, Veikka Tuominen, mlarouche, vole-dev, ≈Ωiga ≈Ωeljko</p>

    {#header_open|Better Awareness of Unwind Tables#}
commit b6277a4b1c2be27701d594bc1465ac72fc226260
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Thu Jun 10 11:25:33 2021 -0700

    better awareness of unwind tables
    
     * stage1 backend allows configuring the uwtables function attr
       via a flag rather than its own logic.
     * stage2 defaults to enabling uwtable attr when
       linking libunwind, or always on windows
     * stage2 makes link_eh_frame_hdr true automatically if uwtable
       attr is set to be on for zig functions
     * CLI: add -funwind-tables and -fno-unwind-tables to allow the user to
       override the defaults.
     * hook it up to `zig cc`
    
    closes #9046
    {#header_close#}

    {#header_open|Move Unreachable Code Errors to Self-Hosted#}
    <p>TODO AstGen is so fast that we do it unconditionally as an extra layer
    on top of stage1</p>
    <p>TODO this gives us errors such as {#link|Compile Errors for Unused Locals#} even for stage1</p>
    <p>TODO this allowed us to move unreachable code error from {#link|Bootstrap Compiler#} to
    the {#link|Self-Hosted Compiler#}, which actually improved perf!</p>
    <p>TODO #9219</p>
    {#header_close#}
    {#header_close#}

    {#header_open|Self-Hosted Compiler#}
    <p>The main focus of this release cycle was the self-hosted compiler (also known
    as "stage2").</p>

    TODO image representing progress

    TODO tetris milestone with perf improvement

    TODO link to my twitter thread about progress updates

    TODO show perf measurement. note that AIR memory layout reworking happened this cycle

    TODO mention MIR and how it relates to perf

    <p>
    Despite the fact that .zig source code by default is still compiled in this
    release using the {#link|Bootstrap Compiler#}, the main driver code is already
    self-hosted, as well as many features, such as {#link|zig cc#}, {#link|C Translation#},
    CPU feature detection, and the {#link|Cache System#}.
    Improvements made to "stage2" in these areas do in fact affect the main Zig user experience.
    </p>

    <p>
    Miscellaneous improvements:
    </p>
    <ul>
      <li>native libc detection: respect spaces in CC env var. 
        Zig has detection for when it is accidentally being called recursively
        when trying to find the native libc installation. However it was not
        working, resulting in a cryptic failure, because zig tried to execute
        a command which had spaces in it rather than tokenizing it.
        This improves the user experience of {#link|zig cc#} for systems that Zig
        does not support cross-compiling for (#8960).</li>
      <li>Print path on libc/libc-path fatal error.</li>
      <li>CLI: rename <code>--override-lib-dir</code> to <code>--zig-lib-dir</code>.
        This breaking change disambiguates between overriding the lib dir when
        performing an installation with the {#link|Zig Build System#}, and overriding the
        lib dir that the Zig installation itself uses.</li>
      <li>The equivalent of <code>zig ast-check</code> is now run unconditionally for
        all files, even when using the {#link|Bootstrap Compiler#}. This means instant
        feedback for many compile errors such as {#link|Compile Errors for Unused Locals#}
        (#9191).</li>
      <li>Added <code>--sysroot</code> link option (#9202).</li>
      <li>AstGen: fixed O(N^2) perf for many decls with same parent (#9234).</li>
      <li>AstGen: error for return outside of function scope (#9346).</li>
      <li>Improved error messages that tell the paths of files when errors occur.</li>
      <li>Added support for the <code>NO_COLOR</code> environment variable.</li>
      <li>More compile errors for invalid inline assembly.</li>
      <li>Fixed libc include directories for the MSVC target.</li>
      <li><code>-rdynamic</code> now implies <code>-fdll-export-fns</code> unless the
        latter is explicitly set (#9340).</li>
      <li>Added <code>-femit-llvm-bc</code> CLI option, and improved <code>-fcompiler-rt</code>
        support (#9440).</li>
      <li>The CLI now recognizes <code>-z origin</code>, <code>-z noexecstack</code>,
        <code>-z now</code>, <code>-z relro</code>, <code>-z notext</code>, and
        <code>-z nodelete</code>. These are additionally available in the
        {#link|Zig Build System#}.</li>
      <li>Fixed libc file to check against compilation target instead of native (#9670).</li>
      <li><code>zig init-lib</code> and <code>zig init-exe</code> will no longer overwrite
        <code>src/main.zig</code> if it already exists.</li>
      <li>The example generated by <code>zig init-exe</code> now demonstrates simple testing (#9919).</li>
      <li>Made pointer variables in <code>zig init-lib</code> and <code>zig init-exe</code> build.zig const (#10057).</li>
      <li><code>zig test</code> gains a <code>--test-no-exec</code> flag.</li>
      <li>Fixed <code>zig test --test-evented-io</code> (#9779).</li>
      <li>New CLI parameter: <code>-femit-implib</code>.</li>
      <li>Fixed incorrectly invoking LLD when building an object file.</li>
      <li>CLI: introduce <code>-fsingle-threaded</code>/<code>-fno-single-threaded</code> (#10143).
        <br>
        Previously there was only <code>--single-threaded</code>.
        <br>
        This flag now matches other boolean flags: instead of only being able to
        opt in to single-threaded builds, you can now force multi-threaded
        builds. Currently this only has the possibility to emit an error
        message, but it is a better user experience to understand why one cannot
        choose to enable threads in some cases.
        <br>
        This is breaking change to the CLI.
      </li>
      <li>Fix lakemont CpuModel (#9099).</li>
    </ul>
    TODO
commit 4e5a88b28882eda156a46ecc7f70887a7bc0b49b
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Sat Nov 20 17:23:44 2021 -0700

    stage2: default dynamic libraries to be linked as needed
    
    After this change, the default for dynamic libraries (`-l` or
    `--library`) is to only link them if they end up being actually used.
    
    With the Zig CLI, the new options `-needed-l` or `--needed-library` can
    be used to force link against a dynamic library.
    
    With `zig cc`, this behavior can be overridden with `-Wl,--no-as-needed`
    (and restored with `-Wl,--as-needed`).
    
    Closes #10164

<p>Contributors: Andrew Kelley, Jakub Konka, Jacob G-W, Robin Voetter, Joachim Schmidt, Luuk de Gram, Evan Haas, Martin Wickham, Matthew Borkowski, Lee Cannon, Veikka Tuominen, Takeshi Yoneda, Travis Staloch, drew, Ryan Liptak, xackus, Emily Bellows, Jonathan Marler, g-w1, Alex R√∏nne Petersen, Dmitry Matveyev, J.C. Moyer, Meghan Denny, Michael Dusan, kprotty, Andrew Gutekanst, Daniele Cocca, FnControlOption, Isaac Freund, Kurt Kartaltepe, LemonBoy, Lewis Gaul, Matt Knight, Tom Maenan Read Cutting, Zen1th, jacob gw, vole-dev, ≈Ωiga ≈Ωeljko, AODQ, Al Hoang, Christopher Smyth, Dimenus, Exonorid, Frank Denis, Hadrien Dorio, Isaac Freund, Josh Soref, Kenta Iwasaki, Loris Cro, Michal Ziulek, Scibuild, Sebastian Ullrich, Sizhe Zhao, Stephen Gregoratto, Stephen Gutekanst, St√©phan Kochen, Tamas Kenez, Thomas Ives, Vincent Rischmann, daurnimator, pithlessly, travisstaloch, xavier</p>
    {#header_open|Parser#}
    TODO
commit 8bf04c3a6955bc66e8d6fbbf00f12a44bb7079d5
Author: Matthew Borkowski <matthew.h.borkowski@gmail.com>
Date:   Sun May 30 02:20:20 2021 -0400

    parse.zig: simplify `parseParamDeclList` by always using scratch buffer

commit ff0a15bb7a57370091898fde7bd53364c90252df
Author: Matthew Borkowski <matthew.h.borkowski@gmail.com>
Date:   Sun May 30 02:24:44 2021 -0400

    parse.zig: make `parseParamDeclList` check for nonfinal varargs

commit f58fbb1004e26982ad83c61b3fecf5e575fb9210
Merge: 46b9e061e 483933d88
Author: Veikka Tuominen <git@vexu.eu>
Date:   Sun Jun 13 19:49:41 2021 +0300

    Merge pull request #9074 from mattbork/parse-always-scratch
    
    parse.zig: simplify parsing functions that build lists by always using scratch buffer

commit ee173d512721df521b5a29bc939770e098931e21
Author: g-w1 <58830309+g-w1@users.noreply.github.com>
Date:   Thu Jul 15 03:55:22 2021 -0400

    parser: require block in suspend expression

commit 2a728f6e5f0c5d12e110313342e714f9f23c4044
Author: Ryan Liptak <squeek502@hotmail.com>
Date:   Mon Sep 20 17:10:32 2021 -0700

    tokenizer: Fix index-out-of-bounds on string_literal_backslash right before EOF

    FUZZING^

commit 3b09262c1252de0d9f946630e701be65bc5b2fc7
Author: Ryan Liptak <squeek502@hotmail.com>
Date:   Mon Sep 20 18:00:04 2021 -0700

    tokenizer: Fix index-out-of-bounds on unfinished unicode escapes before EOF

commit 2ed9288246821c39ae75fa21998a53b34e713cd4
Author: Matthew Borkowski <matthew.h.borkowski@gmail.com>
Date:   Thu Sep 30 01:55:21 2021 -0400

    parse.zig: better c pointer prefix parsing, don't index out of bounds on eof

commit 9024f27d8f5cb651e2260348ce0ee6fd67fc2c32
Merge: 3568cd4b8 c8a066f40
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Wed Oct 27 15:58:33 2021 -0400

    Merge pull request #10040 from mattbork/extern-fn-scopes
    
    stage2: fix extern fn decl parsing and astgen

commit c98b020ce29467e80217718e0a1856b7fccd6b53
Author: Matthew Borkowski <matthew.h.borkowski@gmail.com>
Date:   Thu Dec 2 03:50:23 2021 -0500

    parse.zig: make chained comparison operators a parse error


    {#header_close#}

    {#header_open|LLVM Backend#}
    <p>TODO</p>
    {#header_close#}

    {#header_open|C Backend#}
    <p>TODO</p>
    {#header_close#}

    {#header_open|Self-Hosted Linker#}
    <p>The main improvements to the self-hosted linker have been to the MachO linker backend by
    Jakub Konka and to the {#link|WebAssembly#} linker backend by Luuk de Gram.</p>
    <p>
    The most significant milestone for the self-hosted MachO linker is that it is getting battle tested by the
    community every day, and it can now successfully be used as a drop-in linker for other languages and environments
    such as C, C++, Objective-C, Objective-C++, Go and Rust. It can also be used to cross-compile code dependent on
    frameworks from a non-Apple host such as Linux to Apple platforms such as macOS, iOS, etc., with the sysroot
    provided by the user.
    </p>
    <p>
    Additionally, the linker was featured at the 2021 Handmade Seattle Conference where Jakub in a short 5 minute video
    demonstrated the linker's current capabilities when used with the bootstrap compiler (stage1), and showcased
    a prototype for incremental linking and what developer experience it will unlock when used with the self-hosted
    compiler (stage2). The demo is available at the Handmade Seattle Conference media website here:
    <a href="https://media.handmade-seattle.com/zld/">The ZLD Linker demo</a>.
    </p>
    <p>
    Major improvements to the MachO linker backend:
    </p>
    <ul>
      <li>Ability to correctly link common symbols (aka tentative definitions).</li>
      <li>Ability to generate basic <code>__eh_frame</code> debug section.</li>
      <li>Ability to link system libraries and frameworks including in cross-compilation contexts.
       Achieving this required creating a TAPI (yaml) parser for parsing Apple's text-based definition stub files
       such as <code>libSystem.B.tbd</code>.</li>
      <li>Ability to defer imports (undefined symbols) resolution in dynamic libraries until load time. This
       effectively implies Zig's MachO linker respects <code>-fallow-shlib-undefined</code> or equivalently
       in macOS parlance <code>-Wl, "-undefined dynamic_lookup"</code> flags. This in turn implies that Zig can be
       used to successfully build NodeJS or Python native addons/modules which require deferred until load-time
       undefined symbol resolution. See for instance issue #3000.</li>
      <li>Ability to target iOS and iOS simulator targets. How to do that is documented in Jakub's standalone
        repo <a href="https://github.com/kubkon/zig-ios-example">zig-ios-example</a> on GitHub.</li>
      <li>The linker can successfully be used as a drop-in linker for C, C++, Objective-C, Objective-C++, Go and Rust</li>
      <li>Ability to perform incremental linking updates to Zig mixed with C objects. Current linker implementation
       allows the user to use the self-hosted Zig compiler's watch mode to perform incremental updates to both
       Zig and C sources at the same time. While Zig will perform the updates at the finest granularity, i.e.,
       on a per decl/symbol basis, the linker can also relink the C object files if they are changed without
       affecting the Zig generated decls. This is a prototype of the desired developer experience we are aiming
       for, and it was demonstrated as part of the linker's demo at the 2021 Handmade Seattle Conference (link above).</li>
      <li>Creation of a standalone visualisation tool for exploring differences between subsequent incremental
       linker updates when the self-hosted compiler is run in the watch mode. The tool is called 
       <a href="https://github.com/kubkon/zig-snapshots">zig-snapshots</a> and aims to become the debugging tool for 
       Zig linker developers and contributors. In order to use the tool, the self-hosted Zig compiler needs to be
       built with <code>-Dlink-snapshot</code>, and then the compiler needs to be passed <code>--debug-link-snapshot</code>.</li>
    </ul>
    <p>Miscellaneous improvements:</p>
    <ul>
      <li>Correctly delimit rpath in LC_RPATH load command payload.</li>
      <li>Handle Windows paths when cross-compiling from Windows to macOS.</li>
      <li>Skip temporary and unnamed symbols from inclusion in the MachO's symbol table.</li>
      <li>Ignore undefined symbols marked from discarding - if a symbol is undefined after we tried resolving it
       and it is annotated with <code>N_DESC_DISCARDED</code> description flag, simply ignore it rather than throw
       an <code>error.UndefinedSymbolReference</code>.</li>
      <li>Add missing TbdV3 fields, allow for []TbdV3, and synthesise Objective-C ivars and eh_types symbol names.</li>
      <li>Resolve frameworks in BFS order.</li>
      <li>Add a GOT entry for <code>ARM64_RELOC_POINTER_TO_GOT</code> target.</li>
      <li>COFF: honor the link_libunwind flag.</li>
      <li>wasm: respect stack_size_override for build-obj and build-lib (#8633).</li>
      <li>MachO: Ability to create dylibs (#9266)</li>
      <li>Add fat/universal dylib support. With this change, zig can link with dynamic libraries
          contained within a fat/universal file that had multiple
          separate binaries embedded within it for multi-arch support (in macOS).</li>
      <li>MachO: Fix section mapping for Go specific sections.</li>
      <li>MachO: Link against system libSystem when building natively (#9242).</li>
      <li>COFF: Add IMPLIB support (#9347).</li>
      <li>macho: fixed writing null symbols into undef symbols section.</li>
      <li>macho: handle non-extern <code>UNSIGNED</code> relocs on arm64.</li>
      <li>macho: write out <code>LC_FUNCTION_START</code> data.</li>
      <li>macho: moved load command wrappers and parsing utils to the
        {#link|Standard Library#} (#10310).</li>
      <li>macho: allow undefined symbols in dylibs. We now respect both
        <code>-fallow-shlib-undefined</code> and
        <code>-Wl,"-undefined=dynamic_lookup"</code> flags.
        As a result of this change,
        it is now possible to generate a valid native Node.js addon with Zig
        for macOS (#8180) (#3000).</li>
      <li>macho: refactor consts in <code>std.macho</code>, and fix two bugs (#10338).</li>
      <li>macho: error instead of warning when a requested <code>-framework</code> is not
        found.</li>
    </ul>
    {#header_close#}

    {#header_open|C Translation#}
    <p>TODO</p>
    TODO mention arocc efforts
    <ul>
      <li>Properly handle enums used as boolean expressions.</li>
      <li>Implement flexible arrays (#8759).</li>
      <li>Fix enums that require {#syntax#}c_uint{#endsyntax#} type.</li>
      <li>Better support for static local variables.</li>
      <li>Don't bother with unwrapping pointers. Dereferencing a c pointer implicitly
        includes an unwrap, manually adding it just causes bugs.</li>
      <li>Improve type parsing (#9092).</li>
      <li>Remove usage of {#syntax#}extern enum{#endsyntax#}. Instead, translate enum
        types as the underlying integer type. Translate enum constants
        as top-level integer constants of the correct type (which does not necessarily
        match the enum integer type). If an enum constant's type cannot be translated
        for some reason, omit it.
        <a href="https://github.com/ziglang/zig/issues/2115#issuecomment-827968279">discussion</a>
        (#9153).</li>
      <li>Avoid discarding variables unless necessary (#9205).</li>
      <li>Handle underscore when used as an identifier by using <code>@</code> syntax to
        escape <code>_</code> when used as an identifier.</li>
      <li>Handle NAN and INFINITY macros (#9468).</li>
      <li>Handle signed array subscripts. This is a rather complicated workaround for
        handling signed array subscripts. Once {#syntax#}[*]T + isize{#endsyntax#} is allowed,
        this can be removed (#8556).</li>
      <li>Handle macros that cast to cv void (#9507).</li>
      <li>Allow string literals to be used as <code>char *</code>. 
        In C the type of string literals is <code>char *</code>, so when using them in
        a non-const context we have to cast the const away (#9126).</li>
      <li>Avoid repeating string in type when making it mutable.</li>
      <li>Remove now unnecessary mangling of primitive type shadowing (#6382).</li>
      <li>Fix logic for checking primitive names (#9928).</li>
      <li>Create {#syntax#}inline fn{#endsyntax#} for <code>always_inline</code>.</li>
      <li>Allow negative denominator in remainder (%) operator (#10176).</li>
      <li>Coerce boolean results to c_int when negated (#10175).</li>
      <li>Prevent a while under an if from stealing the else.</li>
      <li>Fix args when calling <code>clang::ASTUnit::LoadFromCommandLine</code>.</li>
    </ul>
    <p>Contributors: Evan Haas, Veikka Tuominen, xackus, Matthew Borkowski, St√©phan Kochen, Andrew Kelley, Tamas Kenez</p>
    {#header_close#}

    {#header_open|Cache System#}
    <p>Zig's cache system is central to its strategy to support many targets, by shipping with
    only source files and lazily building artifacts as needed.</p>

    {#header_open|Shared Cache Locking#}
    <p>The cache system now drops from exclusive locks to shared locks after an
    artifact is built. Additionally, when checking the cache, if an exclusive lock
    cannot be obtained, a shared lock will be obtained instead. Together, this solves
    a design flaw in the caching system that was causing deadlocks, and allows multiple
    processes to share the same read-only build artifacts, while still allowing a cache
    garbage collection utility to operate concurrently with the Zig compiler even as
    build artifacts are being actively used.</p>
    <p>This required new {#link|Standard Library#} functionality:
    <code>std.fs.File.setLock</code>. The {#link|Windows#} implementation based on using
    <code>NtLockFile</code> and <code>NtUnlockFile</code> rather than relying on
    <code>ShareAccess</code> flags and manual polling.</p>
    <p>This resolved the deadlock problems reported in #9139 and #9187. It also allowed us to
    remove another workaround to a deadlock when supplying the same source file multiple times.</p>
    <p>Main issue: #7596</p>
    {#header_close#}

    {#header_open|Improved Handling of Generated File builtin.zig#}
commit 274555be21ea756d8480a586f771274a79a58d80
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Mon Dec 6 16:38:12 2021 -0700

    stage2: improve handling of the generated file builtin.zig
    
    All Zig code is eligible to `@import("builtin")` which is mapped to a
    generated file, build.zig, based on the target and other settings.
    
    Zig invocations which share the same target settings will generate the
    same builtin.zig file and thus the path to builtin.zig is in a shared
    cache folder, and different projects can sometimes use the same file.
    
    Before this commit, this led to race conditions where multiple
    invocations of `zig` would race to write this file. If one process
    wanted to *read* the file while the other process *wrote* the file, the
    reading process could observe a truncated or partially written
    builtin.zig file.
    
    This commit makes the following improvements:
     - limitations:
       - avoid clobbering the inode, mtime in the hot path
       - avoid creating a partially written file
       - builtin.zig needs to be on disk for debug info / stack trace purposes
       - don't mark the task as complete until the file is finished being populated
         (possibly by an external process)
     - strategy:
       - create the `@import("builtin")` `Module.File` during the AstGen
         work, based on generating the contents in memory rather than
         loading from disk.
       - write builtin.zig in a separate task that doesn't have
         to complete until the end of the AstGen work queue so that it
         can be done in parallel with everything else.
       - when writing the file, first stat the file path. If it exists, we are done.
       - otherwise, write the file to a temp file in the same directory and atomically
         rename it into place (clobbering the inode, mtime in the cold path).
     - summary:
       - all limitations respected
       - hot path: one stat() syscall that happens in a worker thread
    
    This required adding a missing function to the standard library:
    `std.fs.Dir.statFile`. In this commit, it does open() and then fstat()
    which is two syscalls. It should be improved in a future commit to only
    make one.
    
    Fixes #9439.
    {#header_close#}

    {#header_open|Detection of Problematic Timestamps#}
commit 77836e08a2384450b5e7933094511b61e3c22140
Merge: 01cb0bdb8 3e618f843
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Thu Dec 9 21:11:51 2021 -0800

    Merge pull request #9930 from PhaseMage/fix-cache-timestamps
    
    Fix isProblematicTimestamp
    {#header_close#}

    {#header_open|Improved Hashing Logic#}
    <p>Stephen Gutekanst writes:</p>
    <p>While investigating slow build times with
    <a href="https://github.com/hexops/mach/issues/124">a large project</a>,
    I found that the compiler was reading from disk nearly every C source file in my project
    when rebuilding despite no changes having been made. This accounted for several seconds of
    time (approx. 20-30% of running <code>zig build</code> without any changes to the sources.)</p>
    
    <p>The cause of this was that comparisons of file mtimes would <em>always</em> fail
    (the mtime of the file on disk was always newer than that stored in the cache manifest),
    and so the cache logic would always fall back to byte-for-byte file content comparisons
    with what is on disk versus in the cache - reading every C source file in my project from
    disk during each rebuild. Because file contents were the same, a cache
    hit occurred, and
    <em>despite the mtime being different the cache manifest would not be updated</em>.</p>

    <p>One could reproduce this by building a Zig project so the cache is populated,
    and then changing mtimes of their C source files to be newer than what is in the cache
    (without altering file contents.)</p>

    <p>The fix was rather simple: always write the updated cache manifest regardless of
    whether or not a cache hit occurred, because a cache hit doesn't indicate if a manifest
    is dirty. Luckily, <code>writeManifest</code> already contained logic to determine if a
    manifest is dirty and becomes no-op if no change to the manifest file is necessary,
    so the fix was to call <code>writeManifest</code> in the {#link|Self-Hosted Compiler#}
    even in the case of a cache hit.</p>
    {#header_close#}
    {#header_close#}

    {#header_open|Debug Crash Handler#}
    <p>TODO show off Martin's awesome crash handler</p>
    {#header_close#}
    {#header_close#}

    {#header_open|Standard Library#}
    <p>The Zig standard library is still unstable and mainly serves as a
    testbed for the language. After the {#link|Self-Hosted Compiler#} is completed,
    the {#link|language|Language Changes#} stabilized, and
    {#link|Package Manager|Package Manager Status#} completed, then it will be time
    to start working on stabilizing the standard library.
    Until then, experimentation and breakage without warning is allowed.</p>

    <p>Miscellaneous improvements:</p>
    <ul>
      <li>Fix path resolution on Windows (#10093).</li>
      <li>Fix stack traces for Zig on macOS when linked with any linker including Apple's ld64.</li>
      <li>Better handing of POLLHUP in ChildProcess (#8988).</li>
      <li>Changed return values of {#syntax#}SectionHeaderIterator().next(){#endsyntax#} to {#syntax#}bswapAllFields(){#endsyntax#} (#9014).</li>
      <li>Fix bug in <code>io.FixedBufferStream</code> seekTo (#9023).</li>
      <li>ascii: add allocation free versions of lower/upper string.</li>
      <li>GeneralPurposeAllocator: add retain_metadata option to report more double frees.</li>
      <li>c: add sigfillset, alarm, sigwait.</li>
      <li>c: fix waitpid() definition.</li>
      <li>Made <code>ChildProcess</code> exit code {#syntax#}u8{#endsyntax#} to match
        <code>process.exit</code>.</li>
      <li>Added <code>os.dup()</code>.</li>
      <li>Made <code>copy_file_range</code> checks run at compile-time (#9146).</li>
      <li>Fixed PIE startup sequence (#9168).</li>
      <li>Added xoshiro256++ (#9298).</li>
      <li>Added missing error codes to <code>os</code> functions.</li>
      <li><code>fs.path.join</code>: skip empty strings.</li>
      <li>{#syntax#}ArrayList(u0){#endsyntax#} works now. This type still tracks length,
          but does not allocate additional memory.</li>
      <li><code>DynamicBitSet.iterator</code> takes self as {#syntax#}const{#endsyntax#}.</li>
      <li><code>mem.split</code> and <code>mem.tokenize</code> generic instead of assuming
        {#syntax#}u8{#endsyntax#} (#9531).</li>
      <li><code>Ip4Address</code> parser: reject 0-prefixed components (#9538).</li>
      <li><code>rand.Random</code>: add <code>enumValue()</code> (#9583).</li>
      <li><code>debug.LineInfo.deinit</code> and <code>debug.SymbolInfo.deinit</code>
          are now public.</li>
      <li>(p)writev now performs partial writes if iov.len &gt; IOV_MAX.</code>
      <li>Fixed bad integer cast in <code>WIFSTOPPED</code> for {#link|Linux#}, FreeBSD, and
        DragonFlyBSD. The intermediate value can be larger than an {#syntax#}u16{#endsyntax#},
        so {#syntax#}@truncate{#endsyntax#} is needed to match the behavior of
        {#link|musl|musl 1.2.2#}.</li>
      <li><code>ArrayListUnmanaged</code>: implement writer().</li>
      <li>Publicized <code>ArrayListUnmanaged.allocatedSlice</code> to match
        <code>ArrayList</code>.</li>
      <li>Added functions to decode an epoch timestamp (#9040).</li>
      <li><code>net.Address</code>: Fix writing 0-bytes when formatting Unix addresses.</li>
      <li><code>unicode</code>: cleanup allocations on error in allocating functions. Fixes
        leaks when <code>utf16leToUtf8Alloc</code>/<code>utf16leToUtf8AllocZ</code>/<code>utf8ToUtf16LeWithNull</code>
        return an error and adds relevant test cases.</li>
      <li>Set the Storage socket sizes to be system defined (#9759).</li>
      <li><code>elf</code>: added a couple missing special section indexes.</li>
      <li><code>elf</code>: add amd64 relocation types.</li>
      <li>Fixed <code>mem.Allocator.resize()</code> for non {#syntax#}u8{#endsyntax#}
        element types (#9806).</li>
      <li>Change to resolving scope IDs using IPv6 sockets.</li>
      <li><code>os.flock</code>: FreeBSD can return <code>EOPNOTSUPP</code>.</li>
      <li>Improved {#syntax#}@panic{#endsyntax#} hierarchy by always using
        <code>builtin.panic</code>.</li>
      <li><code>deflate</code>: fixed <code>bits_left</code> overflow at <code>EndOfStream</code> and {#syntax#}@intCast{#endsyntax#} truncation with empty Huffman table.</li>
      <li><code>deflate</code>: check for distances past beginning of output stream.</li>
      <li><code>deflate</code>: better Huffman.construct errors and error handling (#9880).</li>
      <li><code>os</code>: handle <code>ETXTBSY</code> from <code>open()</code>.</li>
      <li><code>PriorityQueue</code>: moved <code>compareFn</code> from init to type
        constructor in <code>PriorityQueue</code> and <code>PriorityDequeue</code>.
        This change significantly improves performance for simple compare functions and modifies
        the API to be more consistent with e.g. <code>HashMap</code>.</li>
      <li>Distinguish between unexpected child process exit code and unclean exit.</li>
      <li><code>MultiArrayList</code>: get function take self by value.</li>
      <li>Made <code>meta.trait.isContainer</code> true for opaques.</li>
      <li><code>GeneralPurposeAllocator</code>: fixed memory limit accounting for large
        allocations.</li>
      <li><code>ArrayList</code>: add <code>ensureTotalCapacityPrecise</code> (#10077).</li>
      <li><code>ppoll</code>: cast number of <code>fds</code> to <code>nfds_t</code>.</li>
      <li>Publicize <code>Allocator.reallocBytes</code>. This is useful when dealing with
        runtime-known alignments, eg. interfacing with C code that accepts custom allocation
        callbacks (#9394).</li>
      <li>Added <code>chmod</code> and <code>chown</code>.</li>
      <li><code>builtin.StackTraceformat</code>: fix compile error when building for a target
        that does not have stderr or <code>detectTTYConfig</code> (such as freestanding).</li>
      <li>Added <code>NotLink</code> error (#9877) (#9872).</li>
      <li>Fixed type error for {#syntax#}u8{#endsyntax#} in <code>writeIntSlice</code>.</li>
      <li><code>mem.indexOfPos</code> now returns <code>start_index</code> when needle length is
        zero (#10220) (#10216).</li>
      <li>Fixed slice bounds in <code>system.preadMin</code>.</li>
      <li>Handle <code>rmdirZ</code> <code>EINVAL</code> error (#10145).</li>
      <li>Fixed test label off-by-one error (#10277).</li>
      <li><code>PriorityQueue</code>: comparator now takes a context parameter (#10342).</li>
    </ul>

<p>Contributors: Andrew Kelley, Robin Voetter, Jakub Konka, kprotty, Ryan Liptak, Lee Cannon, Vincent Rischmann, LemonBoy, Veikka Tuominen, Jacob G-W, Jonathan Marler, Matthew Borkowski, Evan Haas, Felix (xq) Quei√üner, Takeshi Yoneda, Koakuma, Luuk de Gram, Martin Wickham, Aaron Sikes, Al Hoang, Frank Denis, Isaac Freund, Marc Tiehuis, lucky, Kenta Iwasaki, Matt Chudleigh, Stephen Gregoratto, Travis Staloch, Ali Chraghi, Asherah Connor, Hiroaki Nakamura, Jens Goldberg, Lewis Gaul, Meghan, Michael Dusan, N00byEdge, Ominitay, Tom Maenan Read Cutting, jacob gw, viri, Dmitry Matveyev, Gregory Anders, InKryption, Isaac Freund, Jarred Sumner, Jeremy Fillingim, Malcolm Still, Samadi van Koten, Silver, Sizhe Zhao, Sreehari Sreedev, Stephen von Takach, S√©bastien Marie, Travis Martin, codic12, daurnimator, ominitay, rgreenblatt, xackus, Adam C, Andrew Gutekanst, Arnav Singh, ArtixFox, Asa Zeren, Austin Clements, Aydin Mercan, Ayende Rahien, Biolunar, Bj√∂rn Linse, Boo, Carlos Z√∫√±iga, Chris Gregory, Chris Heyes, Coleman Broaddus, Daniele Cocca, Dante Catalfamo, Dante Catalfamo, Dustin Taylor, Edward Dean, Ellis Trisk-Grove, Emil Lerch, Exonorid, Fabio Arnold, Felix "xq" Quei√üner, Filippo Casarin, FnControlOption, Frank Denis, Garrett Squire, Hiroaki Nakamura, HugoFlorentino, Isaac Freund, Isaac Yonemoto, Jakub Dupak, Jan200101, Justin Whear, Kirjastonhoitaja, Klecko, LemonBoy, Luna, Mahdi Khanalizadeh, Matt Knight, Max Hollmann, Michal Ziulek, Miles Alan, Nameless, Nathan Michaels, Nguy·ªÖn Gia Phong, Philip √Ökesson, Philipp L√ºhmann, Rohlem, Sebastien Marie, Tau, Thom Chiovoloni, Tizoner, Trioct, William Stein, Zach Banks, Zapolsky Anton, alichraghi, charlieman, chwayne, d18g, fn ‚åÉ ‚å•, g-w1, hadroncfy, jdmichaud, joachimschmidt557, leesongun, mason1920, pfg, protty, purringChaos, tgschultz, tjohnes, viri</p>

    {#header_open|Deprecations#}
    <ul>
      <li>{#syntax#}ensureCapacity{#endsyntax#} is removed in favor of
        {#syntax#}ensureTotalCapacity{#endsyntax#} and
        {#syntax#}ensureUnusedCapacity{#endsyntax#}.</li>
      <li>fs.Walker is moved to fs.Dir.Walker. Paths of entries are relative to the Dir.</li>
      <li>{#syntax#}std.Target.current{#endsyntax#} is moved to
        {#syntax#}@import("builtin").target{#endsyntax#} (#9388) (#9321).</li>
      <li><code>DynamicBitSet</code> functions have allocator parameters moved to be the
          first one (after self) to match common convention (#9944).</li>
    </ul>
commit 902df103c6151c257c90de9ba5f29f7f4b9dbea2
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Tue Nov 30 00:13:07 2021 -0700

    std lib API deprecations for the upcoming 0.9.0 release
    
    See #3811

    {#header_close#}

    {#header_open|Additional API#}
    <ul>
      <li><code>mem.alignPointerOffset</code></li>
      <li><code>mem.alignPointer</code></li>
      <li><code>Thread.Futex</code> (#9070).</li>
      <li><code>unicode.fmtUtf16le</code></li>
      <li><code>io.Reader.readUntilDelimiter</code></li>
      <li><code>BoundedArray</code>: a simple way to represent small data whose max size is known (#9134).</li>
      <li><code>meta.Float</code></li>
    </ul>
    {#header_close#}

    {#header_open|Crypto#}
commit ca6951ff7959b88573bfec7c7bf0465209f3263f
Author: Frank Denis <124872+jedisct1@users.noreply.github.com>
Date:   Sun Jun 6 16:37:58 2021 +0200

    std.crypto: timing-safe functions to add and subtract serialized integers (#8977)
    
    This is useful to increment nonces and for scalar reduction.
    
    It will avoid code duplication in crypto/25519 and crypto/pcurves/*

commit 2a7fdd56c6cb9e13634e48eef99b27755f7d2819
Author: Frank Denis <124872+jedisct1@users.noreply.github.com>
Date:   Thu Jun 10 12:58:50 2021 +0200

    aes 128-bit key expansion test - properly test the inverse round keys (#9065)

commit b4b90af4e0a9b15a940d836d275ac9dc50198217
Author: Frank Denis <124872+jedisct1@users.noreply.github.com>
Date:   Thu Jul 8 23:19:49 2021 +0200

    Switch rand.DefaultPrng to Xoshiro256++ (#9301)
    
    Xoroshiro128+ is the current default non-cryptographic random
    number generator.
    
    This algorithm was designed to generate floating-point numbers, by
    only using the top 53 bits. Lower bits have a significant bias, that
    contradicts the documented properties for `rand.DefaultPrng`. This
    also has implications on everything using `Random.fill()`, including
    the way we generate random floating-point numbers.
    
    In addition, Xoroshiro128+ has known issues. See for example:
    - https://lemire.me/blog/2017/08/22/cracking-random-number-generators-xoroshiro128/
    - https://www.pcg-random.org/posts/xoroshiro-fails-truncated.html
    
    Xoshiro256++ addresses these issues, while remaining very fast.

commit 680fa880d63daa6058a084f1c107162e40e18aa8
Author: Frank Denis <124872+jedisct1@users.noreply.github.com>
Date:   Thu Jul 22 01:27:42 2021 +0200

    std.crypto: handle the top bit in 25519.field.fromBytes64() (#9435)
    
    The only known use case for this is the hash-to-curve operation where the top bit is always cleared.
    
    But the function is public, so let's make it work as one would expect in the general case.
    
    Also fix the comment by the way.

commit 8c41a8e761cb609d927b0f2c3c3c094970d2eb58
Author: lucky <53379023+x13a@users.noreply.github.com>
Date:   Tue Aug 24 14:58:09 2021 +0300

    add scrypt kdf (#9577)
    
    add phc encoding parser
    add password hash functions to benchmark
    change bcrypt to be consistent with scrypt

commit 3611487952c4ef126689c447a60cd5cd9288b32f
Author: lucky <53379023+x13a@users.noreply.github.com>
Date:   Thu Sep 9 15:25:44 2021 +0300

    reexport crypto/phc_encoding (#9712)

commit c84147f90dd99af1352e69f698be48964573ee07
Author: Meghan <hello@nektro.net>
Date:   Sat Nov 20 01:37:17 2021 -0800

    std: add `writer` methods on all crypto.hash types (#10168)

commit 590880158a03fa97056b30a3379aab5328ccc977
Author: lucky <53379023+x13a@users.noreply.github.com>
Date:   Mon Nov 15 22:48:24 2021 +0300

    update docs (#10150)
    
    add fast kdf test
    fix inconsistent kdf error
    refactor

commit c61fbe77c8689709aac4adfa78b27ed7ea53ee5f
Author: lucky <53379023+x13a@users.noreply.github.com>
Date:   Mon Nov 15 06:47:57 2021 +0300

    add argon2 kdf (#9756)

commit bd8b94bd0ec592b62b8ae5637375a8d79cbe3e3b
Author: Frank Denis <github@pureftpd.org>
Date:   Mon Nov 8 14:55:27 2021 +0100

    crypto/edwards25519: correctly flip the Y sign in the H2C operation
    
    No security implications, but the current hash-to-curve standard
    defines the sign of the Y coordinate to be negative if `gx1`
    is a square, positive otherwise.
    
    We were doing it the other way round.

commit db181b173f6debc2dbb1e68342ff46a4299c19a9
Author: Ali Chraghi <63465728+AliChraghi@users.noreply.github.com>
Date:   Mon Sep 20 10:33:18 2021 +0430

    Update `hash` and `crypto` benchmarks run comment (#9790)
    
    * sync function arguments name with other same functions

    {#header_close#}

    {#header_open|Math#}
commit 8b0dbca32d4bc8157ffdca74c306aba6c04261b4
Author: Filippo Casarin <casarin.filippo17@gmail.com>
Date:   Wed Mar 24 20:59:15 2021 +0100

    std.math.sqrt_int: fixed odd size integers types

commit 56c0a66ce30094d199420a3f2b2d2e759c1b0613
Author: LemonBoy <thatlemon@gmail.com>
Date:   Fri Jun 11 09:23:48 2021 +0200

    std: Fix tanh for negative inputs
    
    It turns out the code was not ported correctly from C and produced wrong
    results for negative input values. As a bonus fix the NaN codepath by
    adding yet another missing piece of code.
    
    Spotted in #9047

commit 0bde5ce369ba59f7bc33e97cd5b03d69913108c5
Merge: c5d412268 e56ba4cee
Author: Veikka Tuominen <git@vexu.eu>
Date:   Fri Jun 11 19:17:01 2021 +0300

    Merge pull request #8330 from kivikakk/single-limb-bigint-overflow
    
    bigint add failures with aliasing

commit 44cdafd9d46bed36f08effb99aa0bb7fc2145efa
Author: LemonBoy <thatlemon@gmail.com>
Date:   Sat Jun 12 15:35:52 2021 +0200

    std: Fix complex ldexp implementation
    
    Two bugs in the implementation ported from musl made all the complex
    functions relying on ldexp return incorrect results in some cases.
    
    Spotted in #9047

commit 4afe4bdfe7dda638b35a9d388aac9a53d18cc4ba
Author: Robin Voetter <robin@voetter.nl>
Date:   Wed Sep 22 03:27:56 2021 +0200

    big ints: 2s complement signed xor

commit dd81a2147da7b8a216012be2c483c71c4a65cf8b
Merge: a0a847f2e cd3dcc225
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Thu Sep 23 13:17:32 2021 -0400

    Merge pull request #9825 from Snektron/big-int-signed-and-or
    
    big ints: 2s complement signed and/or

commit a28f2e0dd2d7b78464115bca4968f7c0befa6b28
Merge: 2454459ef 95fe86e3d
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Mon Oct 4 14:29:09 2021 -0400

    Merge pull request #9885 from Snektron/big-int-wrapping
    
    Big int wrapping/saturating

commit 82ec56e47e004176cc380cc69764602c4a8d0768
Merge: 6f30c8c09 1e09157b5
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Sat Oct 16 15:06:13 2021 -0400

    Merge pull request #9954 from Snektron/shifts
    
    Big int saturating left shift

commit ad17108bddc3bc198190407ab5b00820b2c17cd5
Merge: e9d1e5e53 15a0b30d8
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Sun Oct 17 21:59:10 2021 -0400

    Merge pull request #9960 from Snektron/bit-not
    
    Some not and vector stuff

commit a3c9bfef301e0a4675fcea57356653334e07df45
Author: Robin Voetter <robin@voetter.nl>
Date:   Fri Oct 22 01:24:38 2021 +0200

    stage2: truncation
    
    * Also fixes a related case where big int truncate would assume that the
    input fits in the output limbs buffer

commit 94879506ea8fe51310f38b3db1bc1ea1e71a4389
Merge: 1690b3577 c563521d4
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Sat Oct 23 22:49:33 2021 -0400

    Merge pull request #10017 from Snektron/big-int-div
    
    Big ints: division fixes

commit d6067db06267e37dec65202667741bc1b63fe980
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Fri Oct 29 17:48:34 2021 -0700

    stage2: implement `@popCount` for non-vectors

commit 2fe7b06f3df06b7a442ffc3d9b951c5d52a11a24
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Tue Oct 5 12:32:26 2021 -0700

    add support for f128 `@mulAdd`
    
    std: add f128 implementations of fma, frexp, and ilogb. Expose `fmal` in
    zig's freestanding libc. This makes `@mulAdd` work correctly for f128.
    
    Fixes a CI regression from yesterday, where I added a usage of f128
    `@mulAdd` into the self-hosted compiler.

commit 411e9ca4ade243344f358b14151e87e2334e76a0
Author: Miles Alan <m@milesalan.com>
Date:   Fri Oct 15 13:55:40 2021 -0400

    Fix bug where std.math.asinh64 doesn't respect signedness for negative values (#9940)
    
    * std: Correct math.asinh64 to return correct signedness for negative values
    
    * std: Add tests for negative values for math.asinh32 and math.asinh64

commit a587dd08f86bf8524b9dc405044b9b48a735db18
Author: Jakub Konka <kubkon@jakubkonka.com>
Date:   Mon Oct 25 01:27:05 2021 +0200

    std: disable big.rational setFloat targeting wasm32
    
    until we fix the underlying issue resulting in `error.TargetTooSmall`
    error.

commit f890de62948a0134a8d703dd2f1ee37701ec4c00
Author: Lewis Gaul <lewis.gaul@gmail.com>
Date:   Tue Oct 26 23:57:58 2021 +0100

    Fix bug in exp2() (#9999)
    
    * Fix bug in exp2_64 to handle negative values (bad translation from C)
    
    * Apply fix to exp2_32() as well, and modify comment on musl behaviour
    
    * Use +%= instead of @addWithOverflow()

commit dfd604834b9bda7ba5cb8117a233ae51bcbc8c0f
Author: Lewis Gaul <lewis.gaul@gmail.com>
Date:   Sun Nov 14 18:04:47 2021 +0000

    Fix copy-paste error that results in incorrect results from exp64()

commit 8f1e417757f2172485cdea792580e2a2afb53ffa
Author: Marc Tiehuis <marc@tiehu.is>
Date:   Tue Nov 23 20:10:32 2021 +1300

    std/math: add ldexp and make scalbn an alias
    
    We assume we are compiled on a base-2 radix floating point system. This
    is a reasonable assumption. musl libc as an example also assumes this.
    
    We implement scalbn as an alias for ldexp, since ldexp is defined as 2
    regardless of the float radix. This is opposite to musl which defines
    scalbn in terms of ldexp.
    
    Closes #9799.

commit a7828c261a0909a1ed672761adf332c978d492c7
Merge: 9e03cf948 b02384e03
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Sun Dec 5 14:49:04 2021 -0800

    Merge pull request #10276 from tiehuis/musl-trig-reimpl
    
    sin/cos/tan musl reimplementation

    <ul>
      <li>Added <code>phi</code> constant.</li>
    </ul>

    {#header_close#}

    {#header_open|JSON#}
    <ul>
      <li>Now allows scientific notation to coerce to integers as long
        as they actually resolve to int type.</li>
      <li>Now catches and handles overflow when parsing floating-point
          values with no fractional parts.</li>
      <li><code>parse</code>: added support for recursive objects (#9307).</li>
      <li><code>stringify</code>: added an option to not write out null optional
        fields (#8979).</li>
      <li>Now uses a bit-stack for nesting instead of a large integer type (#5959).</li>
    </ul>
    {#header_close#}

    {#header_open|Formatted Printing#}
    TODO complain about formatted printing and warn everyone that doomsday is coming and I'm going to break all the API
    <ul>
      <li>std.fmt: Better formatting of tuple types by skipping the useless type name and the numeric field names.</li>
      <li>Added name of type in unsupport format string compile error.</li>
      <li>Added support for printing slices strings (#9562).</li>
      <li>Fixed float formatting for 0.0 when precision is 0 (#9642).</li>
      <li>Format functions take case as an enum.</li>
      <li>Improved error message when there are missing arguments.</li>
      <li>Added <code>fmt.fmtDurationSigned</code>.</li>
      <li>Fixed endless loop, working around a {#link|Bootstrap Compiler#}
        bug that may sometimes lead to an endless loop being generated when unrolling
        the fmt impl (#9961).</li>
    </ul>
    {#header_close#}

    {#header_open|Threading#}
commit b7da1b2d45bc42a56eea3a143e4237a0712c4769
Merge: 5d0dad9ac c8f90a7e7
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Sun Jul 4 22:31:02 2021 -0400

    Merge pull request #9175 from kprotty/thread
    
    std.Thread enhancements

commit 192b5d24cb4651ed2c6b6b1e5fee017d40ea5aa5
Merge: ed174b738 df4fe8716
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Thu Jul 29 13:25:13 2021 -0400

    Merge pull request #8570 from vrischmann/thread-name
    
    add Thread.setName and Thread.getName

commit 2a0adef583d96d87fdca1bc536269931486e4349
Merge: 36b6e95aa e376fab18
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Fri Dec 3 17:29:55 2021 -0800

    Merge pull request #9910 from mikdusan/dragonfly
    
    dragonfly: port Thread.setname/getname

commit 7aaea20e7e5e98bc5b2c4c8ddcf8f6aaa4a9c55d
Author: Koakuma <koachan@protonmail.com>
Date:   Fri Jul 30 21:45:28 2021 +0700

    Add freeAndExit() implementation for Linux/SPARCv9

commit e3840817d7a8a3e9e69a7b0e6f3c7f2ce8c8d029
Author: Koakuma <koachan@protonmail.com>
Date:   Tue Aug 3 20:14:40 2021 +0700

    Linux/SPARCv9: account for branch delay in freeAndExit()

commit 008b0ec5e58fc7e31f3b989868a7d1ea4df3f41d
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Tue Nov 9 18:27:12 2021 -0700

    std.Thread.Mutex: change API to lock() and unlock()
    
    This is a breaking change. Before, usage looked like this:
    
    ```zig
    const held = mutex.acquire();
    defer held.release();
    ```
    
    Now it looks like this:
    
    ```zig
    mutex.lock();
    defer mutex.unlock();
    ```
    
    The `Held` type was an idea to make mutexes slightly safer by making it
    more difficult to forget to release an aquired lock. However, this
    ultimately caused more problems than it solved, when any data structures
    needed to store a held mutex. Simplify everything by reducing the API
    down to the primitives: lock() and unlock().
    
    Closes #8051
    Closes #8246
    Closes #10105

    {#header_close#}

    {#header_open|Allocgate#}
    <p>TODO</p>
    {#header_close#}

    {#header_open|Random Interface#}
    <p>TODO</p>
commit c1a5ff34f3f68a2a0bc32828ab483328cd436fea
Author: Ominitay <37453713+Ominitay@users.noreply.github.com>
Date:   Wed Oct 27 15:53:29 2021 +0100

    std.rand: Refactor `Random` interface
    
    These changes have been made to resolve issue #10037. The `Random`
    interface was implemented in such a way that causes significant slowdown
    when calling the `fill` function of the rng used.
    
    The `Random` interface is no longer stored in a field of the rng, and is
    instead returned by the child function `random()` of the rng. This
    avoids the performance issues caused by the interface.


commit 544d7d99822912a4f85768b0df882775e5fdb80d
Author: ominitay <37453713+ominitay@users.noreply.github.com>
Date:   Fri Oct 29 00:34:17 2021 +0100

    Add argument for `fillFn` to `Random.init`
    
    As suggested by @leecannon, this provides more flexibility to the
    `Random` interface. For exmaple, this allows for an implementation to
    provide multiple different fill functions.

    {#header_close#}

    {#header_open|Hash Maps#}
    <ul>
      <li>Fixed auto hash of tagged union with {#syntax#}void{#endsyntax#} field.</li>
      <li><code>HashMap.getOrPutAssumeCapacityAdapted</code> now sets key to
        {#syntax#}undefined{#endsyntax#} (#9138).</li>
      <li>Fixed <code>ensureUnusedCapacity()</code> over-allocating (#9365).</li>
      <li>Corrected <code>hasUniqueRepresentation</code> for vectors (#9333).</li>
      <li>Added <code>ArrayHashMap.popOrNull</code>, corresponding to
        <code>ArrayList.popOrNull</code>.</li>
      <li>Added <code>getKey</code> methods (#9607).</li>
      <li>Interleaving calls to <code>HashMap.removeAssertDiscard()</code> /
        <code>HashMap.putAssumeCapacity()</code> no longer cause hash maps to run out of
        memory (#7468).</li>
    </ul>
    {#header_close#}

    {#header_open|Logging#}
    <ul>
      <li>Introduced arbitrary code execution via
        <code>${jndi:ldap://...</code> inside any logged string.<ul><li>just kidding</li></ul>
      </li>
      <li>Provide method to set logging level per scope (#8584).</li>
      <li>Added a logging allocator that uses log (#8511).</li>
      <li>Introduced compile error when <code>root.log</code> is not a function.</li>
      <li>Default log logic is extracted into public function <code>std.log.defaultLog</code> (#9224).</li>
      <li>Added <code>std.log.Level.asText</code> for getting a printable string from the log
        level.</li>
    </ul>
    TODO

commit f7b090d7076a20a614bf20cac05e5e18c06ad18a
Author: Isaac Freund <mail@isaacfreund.com>
Date:   Sun Oct 24 13:13:06 2021 +0200

    std.log: simplify to 4 distinct log levels
    
    Over the last year of using std.log in practice, it has become clear to
    me that having the current 8 distinct log levels does more harm than
    good. It is too subjective which level a given message should have which
    makes filtering based on log level weaker as not all messages will have
    been assigned the log level one might expect.
    
    Instead, more granular filtering should be achieved by leveraging the
    logging scope feature. Filtering based on a combination of scope and log
    level should be sufficiently powerful for all use-cases.
    
    Note that the self hosted compiler has already limited itself to 4
    distinct log levels for many months and implemented granular filtering
    based on both log scope and level. This has worked very well in practice
    while working on the self hosted compiler.
    {#header_close#}

    {#header_open|Proper Namespacing of OS Bits#}
    <ul>
      <li><code>errno</code> is now a nonexhaustive enum, with the 'E' prefix chopped off.</li>
    </ul>
commit 594271f8dba0143280990ac2e01dd68a791c05b0
Merge: 81e2034d4 2264fca03
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Thu Sep 2 04:51:42 2021 -0400

    Merge pull request #9618 from ziglang/std-os-reorg
    
    std.os reorganization; new `usingnamespace` semantics
    {#header_close#}
    {#header_close#}

    {#header_open|Zig Build System#}
    <p>
    The Zig Build System is invoked via the <code>zig build</code> command, which executes
    a declarative <code>build.zig</code> script to collect options and describe the graph
    of steps, and then provides options to execute those steps.
    </p>
    <p>
    Although it is already essential to nearly every Zig project, the Zig Build System is
    still experimental and unstable. As a build system, stability is especially important,
    but stabilization cannot occur until the language stabilizes. Language stability is the
    next area of focus on the {#link|Roadmap#}.
    </p>
    <p>Miscellaneous improvements:</p>
    <ul>
      <li>There is a new <code>zig build</code> flag, <code>--prominent-compile-errors</code>,
      which, in the case when there are compile errors, hides all the other standard error output
      besides the compile errors (#8513).</li>
      <li>Improved API to use optionals instead of setting things to {#syntax#}undefined{#endsyntax#}, 
        preventing some common bugs (#9013) (#8928) (#7991).</li>
      <li>Add linkLibCpp helper to LibExeObjStep.</li>
    </ul>
    TODO
    <p>Contributors: Andrew Kelley, Felix (xq) Quei√üner, Lee Cannon, Aaron Sikes, Jonathan Marler, Isaac Freund, Jakub Konka, Martin Wickham, Evan Haas, Ryan Liptak, Tom Maenan Read Cutting, Veikka Tuominen, Andrew Gutekanst, Asa Zeren, Edward Dean, Ellis Trisk-Grove, Jacob G-W, Jan200101, Jarred Sumner, Kenta Iwasaki, LemonBoy, Luuk de Gram, Matt Knight, N00byEdge, Ominitay, Takeshi Yoneda</p>
    {#header_close#}

    {#header_open|Toolchain#}
    <p>TODO</p>

    {#header_open|LLVM 13#}
    <p>
    This release of Zig upgrades to
    <a href="http://releases.llvm.org/13.0.0/docs/ReleaseNotes.html">LLVM 13</a>.
    </p>
    <p>
    TODO mention perf improvement
    </p>
    {#header_close#}

    {#header_open|musl 1.2.2#}
    <p>
    Zig ships with the source code to <a href="http://musl.libc.org/">musl</a>.
    When the musl C ABI is selected, Zig builds static musl from source for the selected target.
    Zig also supports targeting dynamically linked musl which is useful for Linux distributions
    that use it as their system libc, such as
    <a href="https://www.alpinelinux.org/">Alpine Linux</a>.
    </p>
    <p>
    Musl has not tagged a new release since Zig 0.8.0, so the version shipped with Zig
    remains at 1.2.2. However, there has been a major improvement when targeting dynamically
    linked musl libc.
    </p>
    <p>Zig now generates a more accurate libc.so for cross compiling purposes.
    Previously, the way it worked is that we used
    <a href="https://github.com/ziglang/zig/blob/0.8.0/tools/gen_stubs.zig">a script</a>
    to process the output of <code>objdump --dynamic-syms /path/to/musl/libc.so</code>
    and generate a libc.s file, which could then be lazily compiled by Zig into libc.so for the
    requested target when cross compiling.
    </p>
    <p>
    The problem is that the input libc.so file we used was musl built dynamically for x86_64.
    While this is <em>almost</em> correct for other architectures besides x86_64, it is not
    <em>completely</em> correct, leading to bugs such as #8896.
    </p>
    <p>
    The <a href="https://github.com/ziglang/zig/blob/0.9.0/tools/gen_stubs.zig">updated script</a>
    now inputs musl built for 7 different architectures:
    </p>
    <ul>
      <li>libc.so built for riscv64</li>
      <li>libc.so built for mips</li>
      <li>libc.so built for i386</li>
      <li>libc.so built for x86_64</li>
      <li>libc.so built for powerpc</li>
      <li>libc.so built for powerpc64</li>
      <li>libc.so built for aarch64</li>
    </ul>
    <p>These are produced by passing {#link|zig cc#} in as the <code>CC</code>
    environment variable when building musl
    (<a href="https://github.com/ziglang/zig/wiki/Updating-libc#updating-the-libcs-file">instructions</a>).</p>
    <p>
    Next, the script identifies:
    </p>
    <ul>
      <li>which symbols are common, and which are specific to some architectures</li>
      <li>which symbols are functions, and which symbols are objects</li>
      <li>what size (in bytes) the objects are</li>
    </ul>
    <p>
    Using this information, the script creates a libc.S file, which is shipped along with
    the Zig compiler. The file is only 104 KB because it uses the preprocessor in order
    to support the few differences between architectures.
    For example, if you execute Zig like this:
    </p>
    <pre><code>zig build-exe hello.c -target aarch64-linux-musl -dynamic</code></pre>
    <p>
    Zig will, under the hood, assemble libc.S with <code>-DPTR64 -DARCH_aarch64</code>,
    producing a libc.so file that can be passed to the linker, accurately modeling the libc.so
    that will be found on the target.
    </p>
    <p>
    The preprocessor directives in libc.S are based on <em>excluding</em> symbols, so
    even when targeting an architecture that is missing from that list of 7, will work fine;
    it's just that there may be extra symbols that shouldn't be there, and if there happened to
    be any special symbols that only existed for that one architecture, those will be missing.
    It will still be a small improvement to expand that list of 7 to more targets. Regardless,
    the changes made in this release are <strong>strictly an improvement</strong>
    when compared with prior status quo.
    </p>
    {#header_close#}

    {#header_open|glibc 2.34#}
    <p>
    Zig gains the ability to target
    <a href="https://sourceware.org/pipermail/libc-alpha/2021-August/129718.html">glibc 2.34</a>
    in addition to the other 46 glibc versions.
    </p>
    <p>There was a major improvement to targeting glibc when cross compiling.</p>
    <p>Zig supports targeting every version of glibc for any target architecture.
    Previously, in order to accomplish this, Zig had only the information from the .abilist
    files from the latest verison of glibc:
    </p>
    <pre><code>$ cat ../lib/libc/glibc/*.txt | wc -c
205219
$ cat ../lib/libc/glibc/*.txt | xz | wc -c
22976</code></pre>
    <p>The information required to do this took up 200 KB installation size / 22 KB tarball size,
    and it had the following problems (which caused several bugs):
    </p>
    <ul>
      <li>It failed to represent symbols that migrate from one library to another between
        glibc versions (#7667).</li>
      <li>It failed to represent a distinction between functions and objects (#8896).</li>
      <li>It failed to represent object sizes.</li>
    </ul>
    <p>Now there is a new
    <a href="https://github.com/ziglang/glibc-abi-tool">ziglang/glibc-abi-tool</a> that produces
    an improved dataset. The project is quite interesting; if you are curious to learn more,
    check out the README of that repository which explains in detail the strategy and encoding.</p>
    <p>With the new dataset:</p>
    <pre><code>$ cat abilists | wc -c
169421
$ cat abilists | xz | wc -c
24880</code></pre>
    <p>The new data that Zig ships with is 165 KB installation size / 24 KB tarball size,
    and all the above issues are solved.</p>
    <p>
    When a Zig user requests to cross compile for glibc, Zig uses this <code>abilists</code>
    file to create, for the requested glibc version and CPU architecture:
    </p>
    <ul>
      <li>m.s</li>
      <li>pthread.s</li>
      <li>c.s</li>
      <li>dl.s</li>
      <li>rt.s</li>
      <li>ld.s</li>
      <li>util.s</li>
    </ul>
    <p>...which are then assembled into:</p>
    <ul>
      <li>libm.so</li>
      <li>libpthread.so</li>
      <li>libc.so</li>
      <li>libdl.so</li>
      <li>librt.so</li>
      <li>ld.so</li>
      <li>libutil.so</li>
    </ul>
    <p>
    These files are {#link|cached|Cache System#} and placed on the linker line when
    cross compiling. Thanks to this improved dataset, they now accurately model the
    requested version of glibc.
    </p>
    <p>
    If we naively shipped every version of the .abilist files:
    </p>
    <pre><code>$ cat (find glibc/ -name "*.abilist") | wc -c
37041906
$ cat (find glibc/ -name "*.abilist") | xz | wc -c
205036</code></pre>
    <p>...it would have been 35 MiB installation size, 200 KB tarball size.
    So we have effectively achieved a compression ratio of 219:1 by implementing a
    bespoke encoding of this information.</p>

    {#header_open|Native Version Detection#}
    <p>When Zig is instructed to build for the native OS (which is the default, unless
    a <code>-target</code> argument is provided) on a glibc system, Zig first
    checks its own executable ELF file to determine if it is dynamically linked.
    If it is, it introspects its own dynamically loaded libraries to find libc,
    and find out if it is glibc, and if so, what version it is.</p>

    <p>When the Zig compiler is statically linked, it falls back to inspecting
    the <code>/usr/bin/env</code> ELF file to determine the native glibc version,
    by checking the <code>DT_RUNPATH</code>, and then calling <code>readlink()</code>
    on the <code>libc.so</code> file, because typically the symlink will have e.g.
    <code>libc-2.33.so</code> in the name, revealing the glibc version.</p>

    <p>Until now, if the file did not have a <code>DT_RUNPATH</code>, Zig would give
    up and fall back to the default version of glibc, which was 2.17.</p>

    <p>Fortunately, this information is also in <code>readlink()</code> of
    <code>ld.so</code>, which is available as the "INTERP" file path in the ELF file.
    Zig now looks for e.g. <code>ld-2.33.so</code> on the symlink data for the
    dynamic linker, which makes Zig correctly detect the native glibc version in
    more cases.</p>

    <p>In theory a more complete solution would also look at <code>/etc/ld.so.cache</code>
    if necessary, and finally fall back to some hard coded paths, in order
    to resolve the location of <code>libc.so</code>, in order to do this <code>readlink()</code>
    trick on the resulting path. You can find that flow chart with <code>man ld.so</code>.
    But it looks like this logic will be enough to get a correct answer in all real
    world cases. Of course if we find out that is not the case, we can expand the detection
    logic.</p>
    <p>This has been tested on Debian Buster and glibc-based Void Linux.</p>
    <p>See #6469 for more details.</p>
    {#header_close#}
    {#header_close#}

    {#header_open|mingw-w64 9.0.0#}
    <p>
    Zig ships with the source code to <a href="https://mingw-w64.org/">mingw-w64</a>.
    When targeting *-windows-gnu and linking against libc, Zig builds mingw-w64 from source
    for the selected target.
    </p>
    <p>
    The mingw-w64 project has not tagged a new release since Zig 0.8.0, so the version shipped
    with Zig remains at 9.0.0. However, there have been improvements related to mingw-w64
    integration:
    </p>
    <ul>
      <li>TODO</li>
    </ul>
commit f28868e8fd4028cad29bd2de8c0aa1c1713c69dd
Author: Jonathan Marler <johnnymarler@gmail.com>
Date:   Fri Aug 13 12:52:36 2021 -0600

    mingw.zig: fix logic to add crt sources
    
    The current version of code uses isARM to check if we are compiling to any arm target then checks the target bit width to either add the 32-bit sources or 64-bit source.  However, isARM only returns true for 32-bit targets, and isAARCH64 is for the 64-bit targets.
    
    I also replaced the unreachable with a @panic when we receive an unsupported arch because this code is reachable and should turn into an error.

commit e06052f201a63edd772ffade74551d159c7a7784
Author: Michal Ziulek <michalziulek@gmail.com>
Date:   Wed Sep 15 19:38:00 2021 +0200

    Added implementation for _fseeki64 and _ftelli64 from mingw-w64 9.0.0 (#9402). (#9766)
    
    * Added fseeki64.c from mingw-w64 9.0.0. This file was missing in Zig distribution. This file contains implementation for _fseeki64 and _ftelli64 functions.

commit 33889e1974137a54d1a88b87f57462de2a7cc145
Author: J.C. Moyer <jcmoyer32@gmail.com>
Date:   Tue Sep 28 08:26:33 2021 -0400

    mingw-w64: add missing file frexp.c to mingwex.lib
    
    Fixes a frexp() segfault on Windows.

commit 39c0d8bd2c2bd048da6ea1821c6c46aa60fa2907
Merge: 33889e197 08c768ad8
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Mon Nov 15 18:34:52 2021 -0500

    Merge pull request #8674 from xxxbxxx/master
    
    build: workaround link error with LTO and mingw


    {#header_close#}

    {#header_open|libunwind#}
    TODO
    <ul>
      <li>Fix unwinding through libunwind stack frames (#9591).</li>
    </ul>
    {#header_close#}

    {#header_open|libcxx#}
    <ul>
      <li>TODO</li>
    </ul>
commit eecb669074f7798975366ac834ae25fa185f05fa
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Tue Nov 16 12:44:25 2021 -0700

    libcxx: disable redundant new/delete definitions
    
    which are already provided by libcxxabi
    {#header_close#}

    {#header_open|zig cc#}
    <p>TODO</p>
    <ul>
      <li>Fixed not recognizing all the different pie flags that Clang supports.</li>
      <li>Improved linker args parsing. Handle linker args joined with <code>=</code>
        such as <code>-Wl,-rpath=foo</code>.
        Update existing args <code>--major-os-version</code>, <code>--minor-os-version</code>,
        <code>--major-subsystem-version</code> and <code>--minor-subsytem-version</code>
        to work with the new parsing. Also handle <code>-Wl,--script</code> in addition to
        <code>-Wl,-T</code>.</li>
      <li>Support <code>-S</code> and <code>-emit-llvm</code> CLI parameters (#6425).</li>
      <li>Added <code>-ffunction-sections</code>, <code>-fcolor-diagnostics</code>, and
        <code>-fcaret-diagnostics</code> integration (#6290).</li>
      <li>Added <code>-Bdynamic</code> and <code>-Bstatic</code> integration (#10050).</li>
      <li>Honor all <code>-m</code> and <code>-mno-</code> CPU feature flags (#9196).</li>
    </ul>
    <p>
    Please be aware that there are
    <a href="https://github.com/ziglang/zig/issues?q=is%3Aopen+is%3Aissue+label%3A%22zig+cc%22">open zig cc issues</a>.
    However, these are use cases that never worked in the first place, making them
    <em>bugs</em> and <em>enhancements</em>, not regressions.
    </p>
    <p>Contributors: Andrew Kelley, Vincent Rischmann</p>
    {#header_close#}

    {#header_open|zig c++#}
    <code>zig c++</code> is equivalent to {#link|zig cc#} with an added <code>-lc++</code>
    parameter, but I made a separate heading here because I realized that some people are
    not aware that Zig supports compiling C++ code and providing libc++ too!
    </p>
    <pre><code>#include &lt;iostream&gt;
int main() {
    std::cout &lt;&lt; "Hello World!" &lt;&lt; std::endl;
    return 0;
}</code></pre>
    <pre><code>$ zig c++ -o hello hello.cpp
$ ./hello
Hello World!</code></pre>
    <p>Cross-compiling too, of course:</p>
    <pre><code>$ zig c++ -o hello hello.cpp -target riscv64-linux
$ qemu-riscv64 ./hello
Hello World!</code></pre>
    <p>
    One thing that trips people up when they use this feature is that the
    <strong>C++ ABI is not stable across compilers</strong>, so always remember the rule:
    You must use the same C++ compiler to compile <em>all</em> your objects and static libraries.
    This is an unfortunate limitation of C++ which Zig can never fix.
    </p>
    {#header_close#}

    {#header_open|zig fmt#}
    <ul>
      <li><code>--ast-check</code> now works in combination with <code>--stdin</code>.</li>
      <li>Now respects trailing commas in inline assembly.</li>
      <li>Fixed formatting for single-line containers with comments (#8810).</li>
      <li>Fixed {#link|performance|Performance Tracking#} issue with nested
        arrays (#10224) (#10194).</li>
    </ul>
    <p>Contributors: Jacob G-W, jdmichaud, tjohnes, chwayne</p>
    {#header_close#}

    {#header_open|zig ar#}
    <p>Fixed argument forwarding to LLVM on Windows, fixing <code>zig ar</code> on Windows.</p>
    {#header_close#}

    {#header_open|Objective-C and Objective-C++#}
    <p>Zig now supports compiling Objective-C files:</p>
    <p class="file">Foo.h</p>
    <pre><code>#import &lt;Foundation/Foundation.h&gt;

@interface Foo : NSObject

- (NSString *)name;

@end</code></pre>
    <p class="file">Foo.m</p>
    <pre><code>#import "Foo.h"

@implementation Foo

- (NSString *)name
{
      NSString *str = [[NSString alloc] initWithFormat:@"Zig"];
      return str;
}

@end</code></pre>
    <p class="file">test.m</p>
    <pre><code>#import "Foo.h"
#import &lt;assert.h&gt;

int main(int argc, char *argv[])
{
  @autoreleasepool {
      Foo *foo = [[Foo alloc] init];
      NSString *result = [foo name];
      assert([result isEqualToString:@"Zig"]);
      return 0;
  }
}</code></pre>
    <pre><code>$ zig run test.m Foo.m -I. -framework Foundation</code></pre>

    <p>Of course the {#link|zig cc#} CLI works as well:</p>
    <pre><code>$ zig cc -o test test.m Foo.m -I. -framework Foundation</code></pre>

    <p>Likewise, Zig now supports compiling Objective-C++ files. In our example, if we rename
    test.m to test.mm, Foo.m to Foo.mm, and update test.mm like so:</p>

    <p class="file">test.mm</p>
    <pre><code>#import "Foo.h"
#import &lt;assert.h&gt;

int main(int argc, char *argv[])
{
  @autoreleasepool {
      Foo *foo = [[Foo alloc] init];
      NSString *result = [foo name];
      std::cout &lt;&lt; "Hello from C++ and " &lt;&lt; [result UTF8String];
      assert([result isEqualToString:@"Zig"]);
      return 0;
  }
}</code></pre>
    <pre><code>$ zig run test.mm Foo.mm -I. -framework Foundation
Hello from C++ and Zig</code></pre>
    <p>Of course the {#link|zig c++#} CLI works as well:</p>
    <pre><code>$ zig c++ -o test test.mm Foo.mm -I. -framework Foundation</code></pre>
    <p>Contributors: Stephen Gutekanst, Jakub Konka, Andrew Kelley</p>
    {#header_close#}

    {#header_open|compiler-rt#}
    <p>
    compiler-rt is the library that provides, for example, 64-bit integer multiplication for
    32-bit architectures which do not have a machine code instruction for it.
    In the <a href="https://gcc.gnu.org/">GNU</a> world, it's called libgcc.
    </p>
    <p>
    Unlike most compilers, which depend on a binary build of compiler-rt being installed alongside
    the compiler, Zig builds compiler-rt on-the-fly, from source, as needed for the
    target platform. This release saw some improvements to Zig's compiler-rt implementation (#1290).
    </p>
    <ul>
      <li>Added <code>__clzdi2</code> and <code>__clzti2</code>.</li>
      <li>Added <code>__clzdi2</code> and <code>__clzti2</code>.</li>
      <li>Added <code>__ffssi2</code>, <code>__ffsdi2</code> and <code>__ffsti2</code> (#10268).</li>
      <li>Added <code>__paritysi2</code>, <code>__paritydi2</code>, <code>__parityti2</code>.</li>
      <li>Added <code>__ctzsi2</code>, <code>__ctzdi2</code> and <code>__ctzti2</code>.</li>
      <li>Added <code>__bswapsi2</code>, <code>__bswapdi2</code> and <code>__bswapti2</code>.</li>
      <li>Added <code>__cmpsi2</code>, <code>__cmpdi2</code>, <code>__cmpti2</code>.</li>
      <li>Added <code>__ucmpsi2</code>, <code>__ucmpdi2</code>, <code>__ucmpti2</code>.</li>
      <li>Added <code>__popcountsi2</code>, <code>__popcountdi2</code>, and
        <code>__popcountti2</code>.</li>
      <li>Added <code>__mulosi2</code>.</li>
      <li>Added <code>__negsi2</code>, <code>__negdi2</code>, <code>__negti2</code>.</li>
      <li>Added for 64-bit ARM:
        <code>__chkstk</code>, <code>__divti3</code>, <code>__modti3</code>, <code>__udivti3</code>, <code>__umodti3</code>
      </li>
      <li>Disable spinlocks for atomic instrinsics for BPF. The BPF target does not
        support mutable global variables. Mark the BPF target as not supporting atomic
        variables in order to avoid including the global spinlock table.</li>
      <li>Added <code>__isPlatformVersionAtLeast</code> which are used for
        {#link|Objective-C and Objective-C++#} @available expressions) on
        {#link|macOS#} (#10232).</li>
    </ul>
    <p>With all these additions, we nearly have a fully complete compiler-rt implementation!</p>
    <p>TODO mention migrating stuff into compiler-rt</p>
commit 939f51aebba982259628f6255a0b0b0ec2d9c99a
Author: J.C. Moyer <jcmoyer32@gmail.com>
Date:   Tue Nov 16 21:56:55 2021 -0500

    compiler_rt: export floorf, floor, and floorl
    
    This fixes a stage1 linker error when compiling with VS2022 on Windows.

commit 5518a0aff2ab023e9021b74a0a14eb9fcfc094cc
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Tue Oct 5 16:56:46 2021 -0700

    freestanding libc: export fmal
    
    libc requires this to use `long double` which is sometimes the same as
    f128, sometimes not.
    
    Also for an unknown reason, aarch64 is getting an invalid result for the
    `@mulAdd` behavior test for f128. See #9900.

commit 86b92809635607ff357ce96902e2aaf83c3fd029
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Fri Oct 22 10:47:42 2021 -0700

    zig libc: export floorl and ceill
    
    needed since self-hosted now contains calls to `@divFloor` and
    `@divTrunc` for 128-bit floats.

    <p>Contributors: Andrew Kelley, Jan Philipp Hafer, Jacob G-W, Jonathan Marler, LemonBoy, J.C. Moyer, Kenta Iwasaki, Stephen Gutekanst, Veikka Tuominen, jdmichaud</p>
    {#header_close#}
    {#header_close#}

    {#header_open|Continuous Integration#}
    <p>Zig Software Foundation is now paying Hetzner for a 100 euros/month bare metal
    x86_64 machine which operates <a href="https://ci.ziglang.org/">ci.ziglang.org</a>.</p>
    <p>We switched away from Azure for x86_64 Linux CI runs, gaining the following benefits:</p>
    <ul>
      <li>The average CI run for x86_64-linux went from 4 hours to 1.5 hours.</li>
      <li>We stopped experiencing false positive test failures due to the OOM killer.</li>
      <li>We use the server's hard drive for a cache instead of downloading multiple hundreds
          of mebibytes from the Internet every run, saving on bandwidth costs.</li>
      <li>Since it is a bare metal machine with deterministic hardware resources every run,
          it is used for running benchmarks for our new {#link|Performance Tracking#} system.</li>
    </ul>
    <p>
    Big, big thank you to <strong>Michael Dusan</strong> who volunteered his time to set up
    and maintain this.
    Please consider <a href="/zsf/">donating to the ZSF</a> so that we can pay more people
    like him for their valuable time.
    </p>
    <p>
    Still on the to-do list is migrating these over to the new system via QEMU or some other
    OS virtualization software:
    </p>
    <ul>
      <li><strong>x86_64 Windows</strong>, currently running on Azure.</li>
      <li><strong>x86_64 FreeBSD</strong>, currently running on a
        <a href="https://lavatech.top/">LavaTech</a>-hosted instance of SourceHut.</li>
    </ul>
    <p>
    And finally we still have these remaining:
    </p>
    <ul>
      <li>
      <strong>aarch64-linux</strong>, currently running on Drone CI.
      For ARM 64-bit, we probably need to rent another bare metal machine
      that has an aarch64 CPU. On Drone CI it frequently fails CI runs
      with OOM, depending on the luck of the draw of which virtual machine it decides
      to run our builds on.
      </li>
      <li>
      <strong>x86_64-macos</strong>, currently running on Azure.
      For some reason that is beyond my comprehension it is tricky to
      virtualize macOS (possibly for legal reasons?) so it seems this is not eligible to
      move over to be virtualized in our x86_64-linux box. I would love to be told that
      I am wrong about this. We are also seeing some CI runs fail with OOM on this one.
      </li>
      <li>
      <strong>aarch64-macos</strong>, we don't have any CI coverage for this target yet.
      This has both the ARM 64-bit problem and the macOS problem.
      I don't know, maybe the play here would be getting a powerful aarch64-macos server
      and virtualizing Linux on it for the aarch64-linux case. Such machines don't
      really seem to be available yet.
      </li>
    </ul>
    <p>
    Unfortunately until we solve these last three, we will continue to experience
    <a href="https://github.com/ziglang/zig/issues/10008">flaky CI failures</a> due to
    <a href="https://github.com/ziglang/zig/issues/6485">OOM</a>. That is, until we
    ship the {#link|Self-Hosted Compiler#}, which uses significantly less memory, side-stepping
    this problem.
    </p>
    <p>Other miscellaneous news:</p>
    <ul>
      <li>The CI pipeline now uses {#link|zig fmt#} and rejects contributions which do not conform (#9106).</li>
    </ul>
    {#header_close#}

    {#header_open|Performance Tracking#}
    <p>TODO</p>
    {#header_close#}

    {#header_open|Bug Fixes#}
    <p>
    <a href="https://github.com/ziglang/zig/issues?q=is%3Aclosed+is%3Aissue+label%3Abug+milestone%3A0.9.0+">Full list of the TODO bug reports closed during this release cycle</a>.
    </p>
    <p>
    Note: many bugs were both introduced and resolved within this release cycle.
    </p>
    {#header_open|This Release Contains Bugs#}
    <p>
    Zig has
    <a href="https://github.com/ziglang/zig/issues?q=is%3Aopen+is%3Aissue+label%3Abug">known bugs</a>
    and even some
    <a href="https://github.com/ziglang/zig/issues?q=is%3Aopen+is%3Aissue+label%3Amiscompilation">miscompilations</a>.
    </p>
    <p>Zig is immature. Even with Zig 0.9.0, working on a non-trivial project using Zig will
    likely require participating in the development process.</p>
    <p>When Zig reaches 1.0.0, a new requirement for {#link|Tier 1 Support#} will be
    0 known bugs for that target.</p>
    <p>
    A <a href="https://github.com/ziglang/zig/milestone/15">0.9.1 release</a> is planned.
    </p>
    {#header_close#}
    {#header_close#}

    {#header_open|Roadmap#}
    TODO update this section
    <p>The goal of the 0.9.0 release cycle was
    {#link|self-hosting the compiler|Self-Hosted Compiler#}. With a longer release cycle,
    I think we could have done it. However, compared to
    <a href="/download/0.8.0/release-notes.html">0.8.0</a>, which had a 7-month long cycle,
    this one only had 4 months, since releases are,
    <a href="https://kristoff.it/blog/zig-new-relationship-llvm/">for now</a>,
    tied to LLVM releases.</p>

    <p>The major theme of the 0.10.0 release cycle will be
    <strong>stabilizing the language</strong>,
    <strong>creating a first draft of the language specification</strong>, and
    <strong>self-hosting the compiler</strong>.
    </p>

    <p>
    If you want a sense of progress, have a look at the
    <a href="https://github.com/ziglang/zig/blob/0.9.0/test/behavior.zig">behavior tests of the language</a>.
    Here, you can see which tests are passing for self-hosted and which are not yet. For comparison,
    <a href="https://github.com/ziglang/zig/blob/0.8.0/test/behavior.zig">when 0.8.0 was released, this list was empty.</a>
    </p>

    {#header_open|Package Manager Status#}
    <p>
    Having a package manager built into the Zig compiler is a
    <a href="https://github.com/ziglang/zig/issues/943">long-anticipated feature</a>.
    Zig 0.9.0 does not have this feature.
    </p>
    <p>
    If the package manager works well, people will use it, which means building Zig projects
    will involve compiling more lines of Zig code, which means the Zig compiler must get faster,
    better at incremental compilation, and better at resource management.
    </p>
    <p>
    Therefore, the package manager depends on finishing the
    {#link|Self-Hosted Compiler#}, since it is planned to have these
    improved performance characteristics, while the {#link|Bootstrap Compiler#}
    is not planned to have them.</p>
    {#header_close#}

    {#header_open|Accepted Proposals#}
    <p>
    If you want more of a sense of the direction Zig is heading, you can look at
    <a href="https://github.com/ziglang/zig/issues?q=is%3Aopen+is%3Aissue+label%3Aaccepted">the set of accepted proposals</a>.
    </p>
    {#header_close#}
    {#header_close#}

    {#header_open|Thank You Sponsors!#}
    <p>
    Special thanks to those who <a href="/zsf/">sponsor Zig</a>.
    Because of you, Zig is driven by the open source community, rather than the goal of making profit.
    In particular, these fine folks sponsor Zig for $50/month or more:
    </p>
    <p>TODO</p>
    {#header_close#}
    </div>
  </body>
</html>

TODO replace #numbers with github links
TODO run tidy to validate the html
TODO put the new mascot pictures in!
TODO search for "commit " in case I pasted a git commit
TODO announce ifreund as core team member
